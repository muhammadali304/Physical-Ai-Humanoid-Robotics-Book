"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[4123],{1765:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"simulation/fps-validation-process","title":"FPS Validation Process for Physics Simulation","description":"Overview","source":"@site/docs/simulation/fps-validation-process.md","sourceDirName":"simulation","slug":"/simulation/fps-validation-process","permalink":"/docs/simulation/fps-validation-process","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/simulation/fps-validation-process.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Physics Simulation Performance Optimization Guide","permalink":"/docs/simulation/physics-performance-optimization"},"next":{"title":"Navigation Testing Simulation Environment","permalink":"/docs/simulation/navigation-testing-environment"}}');var s=n(4848),l=n(7074);const a={},t="FPS Validation Process for Physics Simulation",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Validation Requirements",id:"validation-requirements",level:2},{value:"Target Performance",id:"target-performance",level:3},{value:"Validation Criteria",id:"validation-criteria",level:3},{value:"Validation Tools",id:"validation-tools",level:2},{value:"FPS Validation Script",id:"fps-validation-script",level:3},{value:"Key Metrics Tracked",id:"key-metrics-tracked",level:3},{value:"Validation Process",id:"validation-process",level:2},{value:"1. Setup Validation Environment",id:"1-setup-validation-environment",level:3},{value:"2. Baseline Testing",id:"2-baseline-testing",level:3},{value:"3. Stress Testing",id:"3-stress-testing",level:3},{value:"4. Extended Testing",id:"4-extended-testing",level:3},{value:"Performance Analysis",id:"performance-analysis",level:2},{value:"Real-time Factor (RTF) Correlation",id:"real-time-factor-rtf-correlation",level:3},{value:"Common Performance Patterns",id:"common-performance-patterns",level:3},{value:"Validation Scenarios",id:"validation-scenarios",level:2},{value:"Scenario 1: Basic Robot in Simple World",id:"scenario-1-basic-robot-in-simple-world",level:3},{value:"Scenario 2: Robot with Full Sensor Suite",id:"scenario-2-robot-with-full-sensor-suite",level:3},{value:"Scenario 3: Complex Environment",id:"scenario-3-complex-environment",level:3},{value:"Scenario 4: Multiple Robots",id:"scenario-4-multiple-robots",level:3},{value:"Troubleshooting Low FPS",id:"troubleshooting-low-fps",level:2},{value:"Common Causes of Low FPS",id:"common-causes-of-low-fps",level:3},{value:"Optimization Strategies",id:"optimization-strategies",level:3},{value:"Validation Results Interpretation",id:"validation-results-interpretation",level:2},{value:"Pass Criteria",id:"pass-criteria",level:3},{value:"Warning Criteria",id:"warning-criteria",level:3},{value:"Fail Criteria",id:"fail-criteria",level:3},{value:"Automated Validation Script",id:"automated-validation-script",level:2},{value:"Performance Reporting",id:"performance-reporting",level:2},{value:"Validation Report Template",id:"validation-report-template",level:3},{value:"Continuous Integration",id:"continuous-integration",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"fps-validation-process-for-physics-simulation",children:"FPS Validation Process for Physics Simulation"})}),"\n",(0,s.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(i.p,{children:"This document outlines the process for validating that Gazebo physics simulation maintains at least 30 FPS performance. Achieving this target ensures smooth, real-time simulation suitable for robot development and testing."}),"\n",(0,s.jsx)(i.h2,{id:"validation-requirements",children:"Validation Requirements"}),"\n",(0,s.jsx)(i.h3,{id:"target-performance",children:"Target Performance"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Minimum FPS"}),": 30 FPS for smooth real-time simulation"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Target FPS"}),": 30+ FPS (higher is better)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Acceptable Range"}),": 25-30 FPS (with warnings)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Performance Goal"}),": Consistent performance over extended periods"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"validation-criteria",children:"Validation Criteria"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Sustained performance at or above 30 FPS"}),"\n",(0,s.jsx)(i.li,{children:"Minimal FPS fluctuations"}),"\n",(0,s.jsx)(i.li,{children:"Stable physics behavior at target frame rate"}),"\n",(0,s.jsx)(i.li,{children:"Acceptable real-time factor (RTF) close to 1.0"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"validation-tools",children:"Validation Tools"}),"\n",(0,s.jsx)(i.h3,{id:"fps-validation-script",children:"FPS Validation Script"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"validate_fps.py"})," script monitors Gazebo's clock topic to calculate actual simulation frame rate:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"# Run the validation script while Gazebo is running\r\nros2 run your_package validate_fps.py\n"})}),"\n",(0,s.jsx)(i.p,{children:"The script provides:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Real-time FPS monitoring"}),"\n",(0,s.jsx)(i.li,{children:"Statistical analysis (average, min, max)"}),"\n",(0,s.jsx)(i.li,{children:"Success rate calculation"}),"\n",(0,s.jsx)(i.li,{children:"Performance alerts"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"key-metrics-tracked",children:"Key Metrics Tracked"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Current FPS"}),": Instantaneous frame rate"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Average FPS"}),": Average over recent samples"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Min/Max FPS"}),": Performance range"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Success Rate"}),": Percentage of samples meeting minimum requirements"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Real-time Factor (RTF)"}),": Simulation speed vs. real-time"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"validation-process",children:"Validation Process"}),"\n",(0,s.jsx)(i.h3,{id:"1-setup-validation-environment",children:"1. Setup Validation Environment"}),"\n",(0,s.jsx)(i.p,{children:"Before running validation:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"# Launch Gazebo with your simulation\r\n# Example:\r\nros2 launch your_robot_gazebo your_world.launch.py\r\n\r\n# In a separate terminal, start the FPS validator\r\nros2 run your_package validate_fps.py\n"})}),"\n",(0,s.jsx)(i.h3,{id:"2-baseline-testing",children:"2. Baseline Testing"}),"\n",(0,s.jsx)(i.p,{children:"Start with simple scenarios:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Single robot in empty world"}),"\n",(0,s.jsx)(i.li,{children:"Verify baseline performance (should be high FPS)"}),"\n",(0,s.jsx)(i.li,{children:"Gradually add complexity"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"3-stress-testing",children:"3. Stress Testing"}),"\n",(0,s.jsx)(i.p,{children:"Test with increasing complexity:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Multiple robots"}),"\n",(0,s.jsx)(i.li,{children:"Complex environments"}),"\n",(0,s.jsx)(i.li,{children:"Active sensors and controllers"}),"\n",(0,s.jsx)(i.li,{children:"Dynamic obstacles"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"4-extended-testing",children:"4. Extended Testing"}),"\n",(0,s.jsx)(i.p,{children:"Run validation for extended periods:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"5-10 minutes for basic validation"}),"\n",(0,s.jsx)(i.li,{children:"30+ minutes for thorough validation"}),"\n",(0,s.jsx)(i.li,{children:"Monitor for performance degradation over time"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"performance-analysis",children:"Performance Analysis"}),"\n",(0,s.jsx)(i.h3,{id:"real-time-factor-rtf-correlation",children:"Real-time Factor (RTF) Correlation"}),"\n",(0,s.jsx)(i.p,{children:"FPS and RTF are related metrics:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"RTF = 1.0 means simulation runs at real-time speed"}),"\n",(0,s.jsx)(i.li,{children:"Higher RTF means faster than real-time"}),"\n",(0,s.jsx)(i.li,{children:"FPS = RTF \xd7 Real-time FPS (typically 30)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"common-performance-patterns",children:"Common Performance Patterns"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"High FPS, Low RTF"}),": Simulation accurate but slow"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Low FPS, High RTF"}),": Simulation fast but potentially unstable"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"High FPS, High RTF"}),": Optimal performance"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Low FPS, Low RTF"}),": Performance issues need addressing"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"validation-scenarios",children:"Validation Scenarios"}),"\n",(0,s.jsx)(i.h3,{id:"scenario-1-basic-robot-in-simple-world",children:"Scenario 1: Basic Robot in Simple World"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"# Target: >60 FPS\r\n# Validate: Single robot with basic sensors\r\n# Expected: High performance, baseline test\n"})}),"\n",(0,s.jsx)(i.h3,{id:"scenario-2-robot-with-full-sensor-suite",children:"Scenario 2: Robot with Full Sensor Suite"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"# Target: >30 FPS\r\n# Validate: Robot with LIDAR, camera, IMU\r\n# Expected: Performance under sensor load\n"})}),"\n",(0,s.jsx)(i.h3,{id:"scenario-3-complex-environment",children:"Scenario 3: Complex Environment"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"# Target: >30 FPS\r\n# Validate: Robot in world with many obstacles\r\n# Expected: Performance with complex collision\n"})}),"\n",(0,s.jsx)(i.h3,{id:"scenario-4-multiple-robots",children:"Scenario 4: Multiple Robots"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"# Target: >30 FPS\r\n# Validate: Multiple robots in same environment\r\n# Expected: Performance with multiple dynamics\n"})}),"\n",(0,s.jsx)(i.h2,{id:"troubleshooting-low-fps",children:"Troubleshooting Low FPS"}),"\n",(0,s.jsx)(i.h3,{id:"common-causes-of-low-fps",children:"Common Causes of Low FPS"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Complex Collision Meshes"}),": Use simpler collision geometries"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"High Physics Update Rates"}),": Adjust ",(0,s.jsx)(i.code,{children:"max_step_size"})," and ",(0,s.jsx)(i.code,{children:"real_time_update_rate"})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Too Many Active Objects"}),": Reduce number of dynamic objects"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Resource Limitations"}),": Check CPU/memory usage"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Complex Sensors"}),": Reduce sensor update rates or resolution"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"optimization-strategies",children:"Optimization Strategies"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Adjust Physics Parameters"}),":"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Increase ",(0,s.jsx)(i.code,{children:"max_step_size"})," (reduces accuracy but improves performance)"]}),"\n",(0,s.jsx)(i.li,{children:"Reduce solver iterations"}),"\n",(0,s.jsx)(i.li,{children:"Adjust ERP and CFM values"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Simplify Models"}),":"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Use primitive shapes for collision"}),"\n",(0,s.jsx)(i.li,{children:"Reduce mesh complexity"}),"\n",(0,s.jsx)(i.li,{children:"Mark static objects as static"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Optimize Sensors"}),":"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Reduce update rates"}),"\n",(0,s.jsx)(i.li,{children:"Lower resolution"}),"\n",(0,s.jsx)(i.li,{children:"Use fewer active sensors simultaneously"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"validation-results-interpretation",children:"Validation Results Interpretation"}),"\n",(0,s.jsx)(i.h3,{id:"pass-criteria",children:"Pass Criteria"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Average FPS \u2265 30"}),"\n",(0,s.jsx)(i.li,{children:"Success rate > 95% (samples \u2265 25 FPS)"}),"\n",(0,s.jsx)(i.li,{children:"Minimal performance fluctuations"}),"\n",(0,s.jsx)(i.li,{children:"Stable physics behavior"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"warning-criteria",children:"Warning Criteria"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Average FPS 25-30"}),"\n",(0,s.jsx)(i.li,{children:"Occasional drops below 25 FPS"}),"\n",(0,s.jsx)(i.li,{children:"Acceptable for development but needs monitoring"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"fail-criteria",children:"Fail Criteria"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Average FPS < 25"}),"\n",(0,s.jsx)(i.li,{children:"Frequent performance drops"}),"\n",(0,s.jsx)(i.li,{children:"Unstable physics behavior"}),"\n",(0,s.jsx)(i.li,{children:"RTF significantly different from target"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"automated-validation-script",children:"Automated Validation Script"}),"\n",(0,s.jsxs)(i.p,{children:["The validation script (",(0,s.jsx)(i.code,{children:"validate_fps.py"}),") automatically checks performance and provides:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:"# Example validation results\r\nresults = {\r\n    'status': 'PASS',  # PASS, WARNING, or FAIL\r\n    'message': 'Performance validation PASSED - Average FPS: 45.2',\r\n    'current_fps': 42.1,\r\n    'average_fps': 45.2,\r\n    'min_fps': 38.5,\r\n    'max_fps': 52.3,\r\n    'success_rate': 100.0,  # Percentage of samples meeting minimum\r\n    'total_samples': 1500,\r\n    'valid_samples': 1500,\r\n    'invalid_samples': 0\r\n}\n"})}),"\n",(0,s.jsx)(i.h2,{id:"performance-reporting",children:"Performance Reporting"}),"\n",(0,s.jsx)(i.h3,{id:"validation-report-template",children:"Validation Report Template"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"Gazebo Physics Simulation FPS Validation Results\r\n================================================\r\nStatus: PASS\r\nMessage: Performance validation PASSED - Average FPS: 45.2\r\nCurrent FPS: 42.1\r\nAverage FPS: 45.2\r\nMin FPS: 38.5\r\nMax FPS: 52.3\r\nSuccess Rate: 100.0% (>= 25 FPS)\r\nTotal Samples: 1500\r\nValid Samples: 1500\r\nInvalid Samples: 0\r\n================================================\n"})}),"\n",(0,s.jsx)(i.h2,{id:"continuous-integration",children:"Continuous Integration"}),"\n",(0,s.jsx)(i.p,{children:"For automated validation in CI/CD pipelines:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:'# Example CI validation script\r\n#!/bin/bash\r\n# Start Gazebo simulation\r\ntimeout 60 gzserver --verbose your_world.world &\r\nGAZEBO_PID=$!\r\n\r\n# Wait for simulation to start\r\nsleep 5\r\n\r\n# Run FPS validation for 30 seconds\r\ntimeout 30 ros2 run your_package validate_fps.py\r\n\r\n# Stop simulation\r\nkill $GAZEBO_PID\r\n\r\n# Check exit code and validation results\r\nif [ $? -eq 0 ]; then\r\n    echo "FPS validation passed"\r\nelse\r\n    echo "FPS validation failed"\r\n    exit 1\r\nfi\n'})}),"\n",(0,s.jsx)(i.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Regular Validation"}),": Test performance regularly during development"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Baseline Establishment"}),": Establish performance baselines early"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Incremental Testing"}),": Add complexity gradually while monitoring performance"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Documentation"}),": Record validation results for future reference"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Hardware Consideration"}),": Validate on target deployment hardware"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Scenario Testing"}),": Test with realistic use cases"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(i.p,{children:"The FPS validation process ensures that Gazebo physics simulation meets the required 30 FPS target for smooth, real-time operation. Regular validation helps maintain performance standards and identifies issues before they impact development workflows. By following this validation process and using the provided tools, you can ensure that your simulation environment provides a stable, high-performance platform for robot development and testing."})]})}function h(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},7074:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>t});var r=n(6540);const s={},l=r.createContext(s);function a(e){const i=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(l.Provider,{value:i},e.children)}}}]);