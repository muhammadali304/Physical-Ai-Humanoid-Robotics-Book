"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[4580],{6032:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"ros2-fundamentals/packages","title":"ROS 2 Packages - Organization and Management","description":"Learning Objectives","source":"@site/docs/ros2-fundamentals/packages.md","sourceDirName":"ros2-fundamentals","slug":"/ros2-fundamentals/packages","permalink":"/docs/ros2-fundamentals/packages","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ros2-fundamentals/packages.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Nodes and Topics - Fundamentals","permalink":"/docs/ros2-fundamentals/nodes-topics"},"next":{"title":"ROS 2 Services and Actions - Advanced Communication","permalink":"/docs/ros2-fundamentals/services-actions"}}');var r=s(4848),i=s(7074);const l={sidebar_position:3},t="ROS 2 Packages - Organization and Management",o={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Conceptual Overview",id:"conceptual-overview",level:2},{value:"Package Types",id:"package-types",level:3},{value:"Hands-On Implementation",id:"hands-on-implementation",level:2},{value:"Creating a Package",id:"creating-a-package",level:3},{value:"Using ros2 pkg create",id:"using-ros2-pkg-create",level:4},{value:"Package.xml Structure",id:"packagexml-structure",level:4},{value:"Setup.py Configuration",id:"setuppy-configuration",level:4},{value:"Package Structure",id:"package-structure",level:3},{value:"Creating a More Complex Package Example",id:"creating-a-more-complex-package-example",level:3},{value:"Launch Files",id:"launch-files",level:3},{value:"Configuration Files",id:"configuration-files",level:3},{value:"Testing &amp; Verification",id:"testing--verification",level:2},{value:"Building Packages",id:"building-packages",level:3},{value:"Running the Package",id:"running-the-package",level:3},{value:"Package Management Commands",id:"package-management-commands",level:3},{value:"Common Issues",id:"common-issues",level:2},{value:"Issue: Package not found after building",id:"issue-package-not-found-after-building",level:3},{value:"Issue: Import errors in Python packages",id:"issue-import-errors-in-python-packages",level:3},{value:"Issue: Dependencies not found",id:"issue-dependencies-not-found",level:3},{value:"Issue: Console scripts not available",id:"issue-console-scripts-not-available",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ros-2-packages---organization-and-management",children:"ROS 2 Packages - Organization and Management"})}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Understand the structure and purpose of ROS 2 packages"}),"\n",(0,r.jsx)(n.li,{children:"Create, build, and manage ROS 2 packages"}),"\n",(0,r.jsx)(n.li,{children:"Organize code, dependencies, and resources within packages"}),"\n",(0,r.jsx)(n.li,{children:"Use package management tools effectively"}),"\n",(0,r.jsx)(n.li,{children:"Follow best practices for package organization"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before starting this chapter, you should:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Understand ROS 2 nodes, topics, services, and actions"}),"\n",(0,r.jsx)(n.li,{children:"Have ROS 2 Humble Hawksbill installed and configured"}),"\n",(0,r.jsx)(n.li,{children:"Be familiar with basic Linux command line operations"}),"\n",(0,r.jsx)(n.li,{children:"Completed the ROS 2 fundamentals chapters"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"conceptual-overview",children:"Conceptual Overview"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"ROS 2 package"})," is the fundamental unit for organizing and distributing ROS 2 software. It contains:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Source code (nodes, libraries, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"Configuration files"}),"\n",(0,r.jsx)(n.li,{children:"Launch files"}),"\n",(0,r.jsx)(n.li,{children:"Documentation"}),"\n",(0,r.jsx)(n.li,{children:"Dependencies"}),"\n",(0,r.jsx)(n.li,{children:"Build instructions"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Packages enable:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Code reusability and modularity"}),"\n",(0,r.jsx)(n.li,{children:"Dependency management"}),"\n",(0,r.jsx)(n.li,{children:"Distribution and sharing"}),"\n",(0,r.jsx)(n.li,{children:"Proper organization of robotics software"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"package-types",children:"Package Types"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 packages can be of different types based on their build system:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ament_python"}),": For Python-based packages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ament_cmake"}),": For CMake-based packages (typically C++)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ament_cargo"}),": For Rust-based packages"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"hands-on-implementation",children:"Hands-On Implementation"}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-package",children:"Creating a Package"}),"\n",(0,r.jsx)(n.h4,{id:"using-ros2-pkg-create",children:"Using ros2 pkg create"}),"\n",(0,r.jsxs)(n.p,{children:["The easiest way to create a new package is using the ",(0,r.jsx)(n.code,{children:"ros2 pkg create"})," command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_robot_package\n"})}),"\n",(0,r.jsx)(n.p,{children:"This creates a basic Python package structure with:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"package.xml"}),": Package metadata and dependencies"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setup.py"}),": Python setup configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setup.cfg"}),": Additional Python configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"my_robot_package/__init__.py"}),": Python package initialization"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"my_robot_package/my_robot_package/"}),": Main package directory"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"packagexml-structure",children:"Package.xml Structure"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"package.xml"})," file contains important metadata about your package:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_robot_package</name>\n  <version>0.0.0</version>\n  <description>TODO: Package description</description>\n  <maintainer email="user@todo.todo">user</maintainer>\n  <license>TODO: License declaration</license>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,r.jsx)(n.h4,{id:"setuppy-configuration",children:"Setup.py Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"setup.py"})," file configures how your package is built and installed:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from setuptools import find_packages, setup\n\npackage_name = 'my_robot_package'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=find_packages(exclude=['test']),\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='user',\n    maintainer_email='user@todo.todo',\n    description='TODO: Package description',\n    license='TODO: License declaration',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'my_node = my_robot_package.my_node:main',\n        ],\n    },\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"package-structure",children:"Package Structure"}),"\n",(0,r.jsx)(n.p,{children:"A well-organized ROS 2 package typically follows this structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt          # Build instructions for CMake packages\n\u251c\u2500\u2500 package.xml             # Package metadata\n\u251c\u2500\u2500 setup.py                # Python package configuration\n\u251c\u2500\u2500 setup.cfg               # Python configuration\n\u251c\u2500\u2500 resource/               # Resource files\n\u2502   \u2514\u2500\u2500 my_robot_package    # Resource index\n\u251c\u2500\u2500 my_robot_package/       # Main Python package directory\n\u2502   \u251c\u2500\u2500 __init__.py         # Python package initialization\n\u2502   \u251c\u2500\u2500 my_node.py          # Python nodes\n\u2502   \u251c\u2500\u2500 my_library.py       # Python libraries\n\u2502   \u2514\u2500\u2500 msg/                # Custom message definitions\n\u2502       \u251c\u2500\u2500 MyMessage.msg\n\u2502       \u2514\u2500\u2500 AnotherMessage.msg\n\u251c\u2500\u2500 launch/                 # Launch files\n\u2502   \u251c\u2500\u2500 my_launch_file.launch.py\n\u2502   \u2514\u2500\u2500 another_launch_file.launch.py\n\u251c\u2500\u2500 config/                 # Configuration files\n\u2502   \u251c\u2500\u2500 params.yaml\n\u2502   \u2514\u2500\u2500 controllers.yaml\n\u251c\u2500\u2500 test/                   # Test files\n\u2502   \u251c\u2500\u2500 test_my_node.py\n\u2502   \u2514\u2500\u2500 test_my_library.py\n\u251c\u2500\u2500 scripts/                # Standalone scripts (if not nodes)\n\u2514\u2500\u2500 include/                # Header files (for C++ packages)\n    \u2514\u2500\u2500 my_robot_package/\n        \u2514\u2500\u2500 my_header.hpp\n"})}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-more-complex-package-example",children:"Creating a More Complex Package Example"}),"\n",(0,r.jsx)(n.p,{children:"Let's create a package that includes multiple components:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Create the package:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python robot_controller\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Update package.xml with dependencies:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>robot_controller</name>\n  <version>0.1.0</version>\n  <description>Robot controller package with various components</description>\n  <maintainer email="user@todo.todo">user</maintainer>\n  <license>Apache-2.0</license>\n\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>geometry_msgs</depend>\n  <depend>sensor_msgs</depend>\n\n  <exec_depend>ros2launch</exec_depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Create a library module (robot_controller/robot_controller/motor_control.py):"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'"""\nMotor control utilities for the robot controller package.\n"""\n\nimport math\nfrom typing import List\n\n\nclass MotorController:\n    """\n    A class to handle basic motor control operations.\n    """\n\n    def __init__(self, motor_id: int, max_speed: float = 1.0):\n        self.motor_id = motor_id\n        self.max_speed = max_speed\n        self.current_speed = 0.0\n        self.is_active = False\n\n    def set_speed(self, speed: float) -> bool:\n        """\n        Set the motor speed with safety checks.\n\n        Args:\n            speed: Desired speed (-max_speed to +max_speed)\n\n        Returns:\n            True if speed was set successfully, False otherwise\n        """\n        if abs(speed) > self.max_speed:\n            print(f"Warning: Speed {speed} exceeds maximum {self.max_speed}")\n            speed = max(min(speed, self.max_speed), -self.max_speed)\n\n        self.current_speed = speed\n        if not self.is_active:\n            self.is_active = True\n\n        return True\n\n    def stop(self) -> None:\n        """Stop the motor."""\n        self.current_speed = 0.0\n        self.is_active = False\n\n    def get_status(self) -> dict:\n        """Get the current motor status."""\n        return {\n            \'motor_id\': self.motor_id,\n            \'current_speed\': self.current_speed,\n            \'is_active\': self.is_active,\n            \'max_speed\': self.max_speed\n        }\n\n\ndef calculate_wheel_speeds(velocity_x: float, velocity_y: float,\n                          angular_z: float, wheel_positions: List[float]) -> List[float]:\n    """\n    Calculate individual wheel speeds for differential drive.\n\n    Args:\n        velocity_x: Linear velocity in x direction\n        velocity_y: Linear velocity in y direction\n        angular_z: Angular velocity around z axis\n        wheel_positions: List of wheel positions [x, y] relative to robot center\n\n    Returns:\n        List of wheel speeds\n    """\n    wheel_speeds = []\n    for pos_x, pos_y in wheel_positions:\n        # Calculate the required wheel speed based on desired motion\n        linear_contribution = velocity_x  # Simplified for example\n        angular_contribution = angular_z * math.sqrt(pos_x**2 + pos_y**2)\n        wheel_speed = linear_contribution + angular_contribution\n        wheel_speeds.append(wheel_speed)\n\n    return wheel_speeds\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Create a main node (robot_controller/robot_controller/controller_node.py):"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\n\"\"\"\nRobot controller node that subscribes to velocity commands and controls motors.\n\"\"\"\n\nimport rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\nfrom std_msgs.msg import String\nfrom .motor_control import MotorController, calculate_wheel_speeds\n\n\nclass RobotControllerNode(Node):\n    \"\"\"\n    A ROS 2 node that controls robot motors based on velocity commands.\n    \"\"\"\n\n    def __init__(self):\n        super().__init__('robot_controller')\n\n        # Initialize motor controllers\n        self.left_motor = MotorController(0, max_speed=2.0)\n        self.right_motor = MotorController(1, max_speed=2.0)\n\n        # Create subscriber for velocity commands\n        self.subscription = self.create_subscription(\n            Twist,\n            'cmd_vel',\n            self.velocity_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n        # Create publisher for status updates\n        self.status_publisher = self.create_publisher(\n            String,\n            'motor_status',\n            10)\n\n        # Log initialization\n        self.get_logger().info('Robot controller node initialized')\n\n    def velocity_callback(self, msg: Twist) -> None:\n        \"\"\"\n        Callback function for velocity commands.\n\n        Args:\n            msg: Twist message containing linear and angular velocities\n        \"\"\"\n        self.get_logger().info(f'Received velocity: linear=({msg.linear.x}, {msg.linear.y}, {msg.linear.z}), '\n                              f'angular=({msg.angular.x}, {msg.angular.y}, {msg.angular.z})')\n\n        # Calculate wheel speeds (simplified for this example)\n        # In a real robot, you would use kinematic equations\n        left_speed = msg.linear.x - msg.angular.z * 0.5  # 0.5 is wheelbase/2 approximation\n        right_speed = msg.linear.x + msg.angular.z * 0.5\n\n        # Apply speeds to motors\n        self.left_motor.set_speed(left_speed)\n        self.right_motor.set_speed(right_speed)\n\n        # Publish status\n        status_msg = String()\n        status_msg.data = f'Left: {self.left_motor.current_speed}, Right: {self.right_motor.current_speed}'\n        self.status_publisher.publish(status_msg)\n\n        self.get_logger().info(f'Set motor speeds - Left: {left_speed}, Right: {right_speed}')\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    controller_node = RobotControllerNode()\n\n    try:\n        rclpy.spin(controller_node)\n    except KeyboardInterrupt:\n        controller_node.get_logger().info('Node interrupted by user')\n    finally:\n        # Clean up when shutting down\n        controller_node.left_motor.stop()\n        controller_node.right_motor.stop()\n        controller_node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Update setup.py to include the new node:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from setuptools import find_packages, setup\n\npackage_name = 'robot_controller'\n\nsetup(\n    name=package_name,\n    version='0.1.0',\n    packages=find_packages(exclude=['test']),\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='user',\n    maintainer_email='user@todo.todo',\n    description='Robot controller package with various components',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'controller_node = robot_controller.controller_node:main',\n        ],\n    },\n)\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"6",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Build the package:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select robot_controller\nsource install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h3,{id:"launch-files",children:"Launch Files"}),"\n",(0,r.jsx)(n.p,{children:"Create a launch file to start your nodes easily:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create launch directory:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src/robot_controller/launch\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create a launch file (robot_controller/launch/controller_launch.py):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='robot_controller',\n            executable='controller_node',\n            name='robot_controller',\n            output='screen',\n            parameters=[\n                # Add parameters here if needed\n            ]\n        )\n    ])\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-files",children:"Configuration Files"}),"\n",(0,r.jsx)(n.p,{children:"Create a configuration directory and YAML file:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create config directory:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src/robot_controller/config\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create a config file (robot_controller/config/robot_params.yaml):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"robot_controller:\n  ros__parameters:\n    max_linear_speed: 1.0\n    max_angular_speed: 1.5\n    wheel_separation: 0.5\n    wheel_radius: 0.1\n    update_rate: 50.0\n"})}),"\n",(0,r.jsx)(n.h2,{id:"testing--verification",children:"Testing & Verification"}),"\n",(0,r.jsx)(n.h3,{id:"building-packages",children:"Building Packages"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Build a specific package:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select robot_controller\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Build all packages:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Build with specific options:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build with symlinks (faster rebuilds)\ncolcon build --symlink-install\n\n# Build only Python packages\ncolcon build --packages-select robot_controller --cmake-clean-cache\n"})}),"\n",(0,r.jsx)(n.h3,{id:"running-the-package",children:"Running the Package"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Source the workspace:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\nsource install/setup.bash\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Run the node directly:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run robot_controller controller_node\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Run using launch file:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch robot_controller controller_launch.py\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Test with velocity commands:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# In another terminal\nros2 topic pub /cmd_vel geometry_msgs/msg/Twist '{linear: {x: 0.5}, angular: {z: 0.2}}'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"package-management-commands",children:"Package Management Commands"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"List all packages:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 pkg list\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Get information about a package:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 pkg info robot_controller\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Find a package:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 pkg prefix robot_controller\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Show package dependencies:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 pkg deps robot_controller\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Find executables in a package:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 pkg executables robot_controller\n"})}),"\n",(0,r.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,r.jsx)(n.h3,{id:"issue-package-not-found-after-building",children:"Issue: Package not found after building"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Make sure to source the workspace: ",(0,r.jsx)(n.code,{children:"source install/setup.bash"})]}),"\n",(0,r.jsx)(n.li,{children:"Check that the package was built successfully"}),"\n",(0,r.jsx)(n.li,{children:"Verify the package name is correct"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"issue-import-errors-in-python-packages",children:"Issue: Import errors in Python packages"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ensure the package was built with ",(0,r.jsx)(n.code,{children:"colcon build"})]}),"\n",(0,r.jsxs)(n.li,{children:["Check that the ",(0,r.jsx)(n.code,{children:"__init__.py"})," files are present"]}),"\n",(0,r.jsx)(n.li,{children:"Verify that the package name in setup.py matches the directory name"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"issue-dependencies-not-found",children:"Issue: Dependencies not found"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add dependencies to ",(0,r.jsx)(n.code,{children:"package.xml"})]}),"\n",(0,r.jsxs)(n.li,{children:["Run ",(0,r.jsx)(n.code,{children:"rosdep install --from-paths src --ignore-src -r -y"})," to install dependencies"]}),"\n",(0,r.jsx)(n.li,{children:"Rebuild the package after adding dependencies"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"issue-console-scripts-not-available",children:"Issue: Console scripts not available"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Make sure entry points are properly defined in ",(0,r.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,r.jsx)(n.li,{children:"Verify the function exists and has the correct signature"}),"\n",(0,r.jsx)(n.li,{children:"Rebuild the package after updating setup.py"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Packages are the fundamental unit for organizing ROS 2 software"}),"\n",(0,r.jsx)(n.li,{children:"Proper package structure improves maintainability and reusability"}),"\n",(0,r.jsxs)(n.li,{children:["Dependencies must be declared in ",(0,r.jsx)(n.code,{children:"package.xml"})," and ",(0,r.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,r.jsx)(n.li,{children:"Launch files simplify running multiple nodes together"}),"\n",(0,r.jsx)(n.li,{children:"Configuration files separate parameters from code"}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"colcon build"})," to compile packages"]}),"\n",(0,r.jsx)(n.li,{children:"Always source the workspace after building"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"In the next chapter, you'll learn about simulation with Gazebo, which will allow you to test your ROS 2 packages in a virtual environment before deploying to real hardware."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},7074:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var a=s(6540);const r={},i=a.createContext(r);function l(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);