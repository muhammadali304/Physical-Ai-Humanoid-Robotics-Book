"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[4580],{6032:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"ros2-fundamentals/packages","title":"ROS 2 Packages - Organization and Management","description":"Learning Objectives","source":"@site/docs/ros2-fundamentals/packages.md","sourceDirName":"ros2-fundamentals","slug":"/ros2-fundamentals/packages","permalink":"/./docs/ros2-fundamentals/packages","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ros2-fundamentals/packages.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Nodes and Topics - Fundamentals","permalink":"/./docs/ros2-fundamentals/nodes-topics"},"next":{"title":"ROS 2 Services and Actions - Advanced Communication","permalink":"/./docs/ros2-fundamentals/services-actions"}}');var a=r(4848),i=r(7074);const l={sidebar_position:3},t="ROS 2 Packages - Organization and Management",o={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Conceptual Overview",id:"conceptual-overview",level:2},{value:"Package Types",id:"package-types",level:3},{value:"Hands-On Implementation",id:"hands-on-implementation",level:2},{value:"Creating a Package",id:"creating-a-package",level:3},{value:"Using ros2 pkg create",id:"using-ros2-pkg-create",level:4},{value:"Package.xml Structure",id:"packagexml-structure",level:4},{value:"Setup.py Configuration",id:"setuppy-configuration",level:4},{value:"Package Structure",id:"package-structure",level:3},{value:"Creating a More Complex Package Example",id:"creating-a-more-complex-package-example",level:3},{value:"Launch Files",id:"launch-files",level:3},{value:"Configuration Files",id:"configuration-files",level:3},{value:"Testing &amp; Verification",id:"testing--verification",level:2},{value:"Building Packages",id:"building-packages",level:3},{value:"Running the Package",id:"running-the-package",level:3},{value:"Package Management Commands",id:"package-management-commands",level:3},{value:"Common Issues",id:"common-issues",level:2},{value:"Issue: Package not found after building",id:"issue-package-not-found-after-building",level:3},{value:"Issue: Import errors in Python packages",id:"issue-import-errors-in-python-packages",level:3},{value:"Issue: Dependencies not found",id:"issue-dependencies-not-found",level:3},{value:"Issue: Console scripts not available",id:"issue-console-scripts-not-available",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"ros-2-packages---organization-and-management",children:"ROS 2 Packages - Organization and Management"})}),"\n",(0,a.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,a.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Understand the structure and purpose of ROS 2 packages"}),"\n",(0,a.jsx)(n.li,{children:"Create, build, and manage ROS 2 packages"}),"\n",(0,a.jsx)(n.li,{children:"Organize code, dependencies, and resources within packages"}),"\n",(0,a.jsx)(n.li,{children:"Use package management tools effectively"}),"\n",(0,a.jsx)(n.li,{children:"Follow best practices for package organization"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsx)(n.p,{children:"Before starting this chapter, you should:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Understand ROS 2 nodes, topics, services, and actions"}),"\n",(0,a.jsx)(n.li,{children:"Have ROS 2 Humble Hawksbill installed and configured"}),"\n",(0,a.jsx)(n.li,{children:"Be familiar with basic Linux command line operations"}),"\n",(0,a.jsx)(n.li,{children:"Completed the ROS 2 fundamentals chapters"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"conceptual-overview",children:"Conceptual Overview"}),"\n",(0,a.jsxs)(n.p,{children:["A ",(0,a.jsx)(n.strong,{children:"ROS 2 package"})," is the fundamental unit for organizing and distributing ROS 2 software. It contains:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Source code (nodes, libraries, etc.)"}),"\n",(0,a.jsx)(n.li,{children:"Configuration files"}),"\n",(0,a.jsx)(n.li,{children:"Launch files"}),"\n",(0,a.jsx)(n.li,{children:"Documentation"}),"\n",(0,a.jsx)(n.li,{children:"Dependencies"}),"\n",(0,a.jsx)(n.li,{children:"Build instructions"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Packages enable:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Code reusability and modularity"}),"\n",(0,a.jsx)(n.li,{children:"Dependency management"}),"\n",(0,a.jsx)(n.li,{children:"Distribution and sharing"}),"\n",(0,a.jsx)(n.li,{children:"Proper organization of robotics software"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"package-types",children:"Package Types"}),"\n",(0,a.jsx)(n.p,{children:"ROS 2 packages can be of different types based on their build system:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"ament_python"}),": For Python-based packages"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"ament_cmake"}),": For CMake-based packages (typically C++)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"ament_cargo"}),": For Rust-based packages"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"hands-on-implementation",children:"Hands-On Implementation"}),"\n",(0,a.jsx)(n.h3,{id:"creating-a-package",children:"Creating a Package"}),"\n",(0,a.jsx)(n.h4,{id:"using-ros2-pkg-create",children:"Using ros2 pkg create"}),"\n",(0,a.jsxs)(n.p,{children:["The easiest way to create a new package is using the ",(0,a.jsx)(n.code,{children:"ros2 pkg create"})," command:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\nros2 pkg create --build-type ament_python my_robot_package\n"})}),"\n",(0,a.jsx)(n.p,{children:"This creates a basic Python package structure with:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"package.xml"}),": Package metadata and dependencies"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"setup.py"}),": Python setup configuration"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"setup.cfg"}),": Additional Python configuration"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"my_robot_package/__init__.py"}),": Python package initialization"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"my_robot_package/my_robot_package/"}),": Main package directory"]}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"packagexml-structure",children:"Package.xml Structure"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"package.xml"})," file contains important metadata about your package:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\r\n<package format="3">\r\n  <name>my_robot_package</name>\r\n  <version>0.0.0</version>\r\n  <description>TODO: Package description</description>\r\n  <maintainer email="user@todo.todo">user</maintainer>\r\n  <license>TODO: License declaration</license>\r\n\r\n  <test_depend>ament_copyright</test_depend>\r\n  <test_depend>ament_flake8</test_depend>\r\n  <test_depend>ament_pep257</test_depend>\r\n  <test_depend>python3-pytest</test_depend>\r\n\r\n  <export>\r\n    <build_type>ament_python</build_type>\r\n  </export>\r\n</package>\n'})}),"\n",(0,a.jsx)(n.h4,{id:"setuppy-configuration",children:"Setup.py Configuration"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"setup.py"})," file configures how your package is built and installed:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from setuptools import find_packages, setup\r\n\r\npackage_name = 'my_robot_package'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='0.0.0',\r\n    packages=find_packages(exclude=['test']),\r\n    data_files=[\r\n        ('share/ament_index/resource_index/packages',\r\n            ['resource/' + package_name]),\r\n        ('share/' + package_name, ['package.xml']),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='user',\r\n    maintainer_email='user@todo.todo',\r\n    description='TODO: Package description',\r\n    license='TODO: License declaration',\r\n    tests_require=['pytest'],\r\n    entry_points={\r\n        'console_scripts': [\r\n            'my_node = my_robot_package.my_node:main',\r\n        ],\r\n    },\r\n)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"package-structure",children:"Package Structure"}),"\n",(0,a.jsx)(n.p,{children:"A well-organized ROS 2 package typically follows this structure:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"my_robot_package/\r\n\u251c\u2500\u2500 CMakeLists.txt          # Build instructions for CMake packages\r\n\u251c\u2500\u2500 package.xml             # Package metadata\r\n\u251c\u2500\u2500 setup.py                # Python package configuration\r\n\u251c\u2500\u2500 setup.cfg               # Python configuration\r\n\u251c\u2500\u2500 resource/               # Resource files\r\n\u2502   \u2514\u2500\u2500 my_robot_package    # Resource index\r\n\u251c\u2500\u2500 my_robot_package/       # Main Python package directory\r\n\u2502   \u251c\u2500\u2500 __init__.py         # Python package initialization\r\n\u2502   \u251c\u2500\u2500 my_node.py          # Python nodes\r\n\u2502   \u251c\u2500\u2500 my_library.py       # Python libraries\r\n\u2502   \u2514\u2500\u2500 msg/                # Custom message definitions\r\n\u2502       \u251c\u2500\u2500 MyMessage.msg\r\n\u2502       \u2514\u2500\u2500 AnotherMessage.msg\r\n\u251c\u2500\u2500 launch/                 # Launch files\r\n\u2502   \u251c\u2500\u2500 my_launch_file.launch.py\r\n\u2502   \u2514\u2500\u2500 another_launch_file.launch.py\r\n\u251c\u2500\u2500 config/                 # Configuration files\r\n\u2502   \u251c\u2500\u2500 params.yaml\r\n\u2502   \u2514\u2500\u2500 controllers.yaml\r\n\u251c\u2500\u2500 test/                   # Test files\r\n\u2502   \u251c\u2500\u2500 test_my_node.py\r\n\u2502   \u2514\u2500\u2500 test_my_library.py\r\n\u251c\u2500\u2500 scripts/                # Standalone scripts (if not nodes)\r\n\u2514\u2500\u2500 include/                # Header files (for C++ packages)\r\n    \u2514\u2500\u2500 my_robot_package/\r\n        \u2514\u2500\u2500 my_header.hpp\n"})}),"\n",(0,a.jsx)(n.h3,{id:"creating-a-more-complex-package-example",children:"Creating a More Complex Package Example"}),"\n",(0,a.jsx)(n.p,{children:"Let's create a package that includes multiple components:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Create the package:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\nros2 pkg create --build-type ament_python robot_controller\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Update package.xml with dependencies:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\r\n<package format="3">\r\n  <name>robot_controller</name>\r\n  <version>0.1.0</version>\r\n  <description>Robot controller package with various components</description>\r\n  <maintainer email="user@todo.todo">user</maintainer>\r\n  <license>Apache-2.0</license>\r\n\r\n  <depend>rclpy</depend>\r\n  <depend>std_msgs</depend>\r\n  <depend>geometry_msgs</depend>\r\n  <depend>sensor_msgs</depend>\r\n\r\n  <exec_depend>ros2launch</exec_depend>\r\n\r\n  <test_depend>ament_copyright</test_depend>\r\n  <test_depend>ament_flake8</test_depend>\r\n  <test_depend>ament_pep257</test_depend>\r\n  <test_depend>python3-pytest</test_depend>\r\n\r\n  <export>\r\n    <build_type>ament_python</build_type>\r\n  </export>\r\n</package>\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Create a library module (robot_controller/robot_controller/motor_control.py):"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'"""\r\nMotor control utilities for the robot controller package.\r\n"""\r\n\r\nimport math\r\nfrom typing import List\r\n\r\n\r\nclass MotorController:\r\n    """\r\n    A class to handle basic motor control operations.\r\n    """\r\n\r\n    def __init__(self, motor_id: int, max_speed: float = 1.0):\r\n        self.motor_id = motor_id\r\n        self.max_speed = max_speed\r\n        self.current_speed = 0.0\r\n        self.is_active = False\r\n\r\n    def set_speed(self, speed: float) -> bool:\r\n        """\r\n        Set the motor speed with safety checks.\r\n\r\n        Args:\r\n            speed: Desired speed (-max_speed to +max_speed)\r\n\r\n        Returns:\r\n            True if speed was set successfully, False otherwise\r\n        """\r\n        if abs(speed) > self.max_speed:\r\n            print(f"Warning: Speed {speed} exceeds maximum {self.max_speed}")\r\n            speed = max(min(speed, self.max_speed), -self.max_speed)\r\n\r\n        self.current_speed = speed\r\n        if not self.is_active:\r\n            self.is_active = True\r\n\r\n        return True\r\n\r\n    def stop(self) -> None:\r\n        """Stop the motor."""\r\n        self.current_speed = 0.0\r\n        self.is_active = False\r\n\r\n    def get_status(self) -> dict:\r\n        """Get the current motor status."""\r\n        return {\r\n            \'motor_id\': self.motor_id,\r\n            \'current_speed\': self.current_speed,\r\n            \'is_active\': self.is_active,\r\n            \'max_speed\': self.max_speed\r\n        }\r\n\r\n\r\ndef calculate_wheel_speeds(velocity_x: float, velocity_y: float,\r\n                          angular_z: float, wheel_positions: List[float]) -> List[float]:\r\n    """\r\n    Calculate individual wheel speeds for differential drive.\r\n\r\n    Args:\r\n        velocity_x: Linear velocity in x direction\r\n        velocity_y: Linear velocity in y direction\r\n        angular_z: Angular velocity around z axis\r\n        wheel_positions: List of wheel positions [x, y] relative to robot center\r\n\r\n    Returns:\r\n        List of wheel speeds\r\n    """\r\n    wheel_speeds = []\r\n    for pos_x, pos_y in wheel_positions:\r\n        # Calculate the required wheel speed based on desired motion\r\n        linear_contribution = velocity_x  # Simplified for example\r\n        angular_contribution = angular_z * math.sqrt(pos_x**2 + pos_y**2)\r\n        wheel_speed = linear_contribution + angular_contribution\r\n        wheel_speeds.append(wheel_speed)\r\n\r\n    return wheel_speeds\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Create a main node (robot_controller/robot_controller/controller_node.py):"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\r\n\"\"\"\r\nRobot controller node that subscribes to velocity commands and controls motors.\r\n\"\"\"\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import Twist\r\nfrom std_msgs.msg import String\r\nfrom .motor_control import MotorController, calculate_wheel_speeds\r\n\r\n\r\nclass RobotControllerNode(Node):\r\n    \"\"\"\r\n    A ROS 2 node that controls robot motors based on velocity commands.\r\n    \"\"\"\r\n\r\n    def __init__(self):\r\n        super().__init__('robot_controller')\r\n\r\n        # Initialize motor controllers\r\n        self.left_motor = MotorController(0, max_speed=2.0)\r\n        self.right_motor = MotorController(1, max_speed=2.0)\r\n\r\n        # Create subscriber for velocity commands\r\n        self.subscription = self.create_subscription(\r\n            Twist,\r\n            'cmd_vel',\r\n            self.velocity_callback,\r\n            10)\r\n        self.subscription  # prevent unused variable warning\r\n\r\n        # Create publisher for status updates\r\n        self.status_publisher = self.create_publisher(\r\n            String,\r\n            'motor_status',\r\n            10)\r\n\r\n        # Log initialization\r\n        self.get_logger().info('Robot controller node initialized')\r\n\r\n    def velocity_callback(self, msg: Twist) -> None:\r\n        \"\"\"\r\n        Callback function for velocity commands.\r\n\r\n        Args:\r\n            msg: Twist message containing linear and angular velocities\r\n        \"\"\"\r\n        self.get_logger().info(f'Received velocity: linear=({msg.linear.x}, {msg.linear.y}, {msg.linear.z}), '\r\n                              f'angular=({msg.angular.x}, {msg.angular.y}, {msg.angular.z})')\r\n\r\n        # Calculate wheel speeds (simplified for this example)\r\n        # In a real robot, you would use kinematic equations\r\n        left_speed = msg.linear.x - msg.angular.z * 0.5  # 0.5 is wheelbase/2 approximation\r\n        right_speed = msg.linear.x + msg.angular.z * 0.5\r\n\r\n        # Apply speeds to motors\r\n        self.left_motor.set_speed(left_speed)\r\n        self.right_motor.set_speed(right_speed)\r\n\r\n        # Publish status\r\n        status_msg = String()\r\n        status_msg.data = f'Left: {self.left_motor.current_speed}, Right: {self.right_motor.current_speed}'\r\n        self.status_publisher.publish(status_msg)\r\n\r\n        self.get_logger().info(f'Set motor speeds - Left: {left_speed}, Right: {right_speed}')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n\r\n    controller_node = RobotControllerNode()\r\n\r\n    try:\r\n        rclpy.spin(controller_node)\r\n    except KeyboardInterrupt:\r\n        controller_node.get_logger().info('Node interrupted by user')\r\n    finally:\r\n        # Clean up when shutting down\r\n        controller_node.left_motor.stop()\r\n        controller_node.right_motor.stop()\r\n        controller_node.destroy_node()\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"5",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Update setup.py to include the new node:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from setuptools import find_packages, setup\r\n\r\npackage_name = 'robot_controller'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='0.1.0',\r\n    packages=find_packages(exclude=['test']),\r\n    data_files=[\r\n        ('share/ament_index/resource_index/packages',\r\n            ['resource/' + package_name]),\r\n        ('share/' + package_name, ['package.xml']),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='user',\r\n    maintainer_email='user@todo.todo',\r\n    description='Robot controller package with various components',\r\n    license='Apache-2.0',\r\n    tests_require=['pytest'],\r\n    entry_points={\r\n        'console_scripts': [\r\n            'controller_node = robot_controller.controller_node:main',\r\n        ],\r\n    },\r\n)\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"6",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Build the package:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --packages-select robot_controller\r\nsource install/setup.bash\n"})}),"\n",(0,a.jsx)(n.h3,{id:"launch-files",children:"Launch Files"}),"\n",(0,a.jsx)(n.p,{children:"Create a launch file to start your nodes easily:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Create launch directory:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src/robot_controller/launch\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Create a launch file (robot_controller/launch/controller_launch.py):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='robot_controller',\r\n            executable='controller_node',\r\n            name='robot_controller',\r\n            output='screen',\r\n            parameters=[\r\n                # Add parameters here if needed\r\n            ]\r\n        )\r\n    ])\n"})}),"\n",(0,a.jsx)(n.h3,{id:"configuration-files",children:"Configuration Files"}),"\n",(0,a.jsx)(n.p,{children:"Create a configuration directory and YAML file:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Create config directory:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src/robot_controller/config\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Create a config file (robot_controller/config/robot_params.yaml):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"robot_controller:\r\n  ros__parameters:\r\n    max_linear_speed: 1.0\r\n    max_angular_speed: 1.5\r\n    wheel_separation: 0.5\r\n    wheel_radius: 0.1\r\n    update_rate: 50.0\n"})}),"\n",(0,a.jsx)(n.h2,{id:"testing--verification",children:"Testing & Verification"}),"\n",(0,a.jsx)(n.h3,{id:"building-packages",children:"Building Packages"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Build a specific package:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --packages-select robot_controller\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Build all packages:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Build with specific options:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Build with symlinks (faster rebuilds)\r\ncolcon build --symlink-install\r\n\r\n# Build only Python packages\r\ncolcon build --packages-select robot_controller --cmake-clean-cache\n"})}),"\n",(0,a.jsx)(n.h3,{id:"running-the-package",children:"Running the Package"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Source the workspace:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\nsource install/setup.bash\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Run the node directly:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 run robot_controller controller_node\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Run using launch file:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 launch robot_controller controller_launch.py\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Test with velocity commands:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# In another terminal\r\nros2 topic pub /cmd_vel geometry_msgs/msg/Twist '{linear: {x: 0.5}, angular: {z: 0.2}}'\n"})}),"\n",(0,a.jsx)(n.h3,{id:"package-management-commands",children:"Package Management Commands"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"List all packages:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 pkg list\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Get information about a package:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 pkg info robot_controller\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Find a package:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 pkg prefix robot_controller\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Show package dependencies:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 pkg deps robot_controller\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Find executables in a package:"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 pkg executables robot_controller\n"})}),"\n",(0,a.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,a.jsx)(n.h3,{id:"issue-package-not-found-after-building",children:"Issue: Package not found after building"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Make sure to source the workspace: ",(0,a.jsx)(n.code,{children:"source install/setup.bash"})]}),"\n",(0,a.jsx)(n.li,{children:"Check that the package was built successfully"}),"\n",(0,a.jsx)(n.li,{children:"Verify the package name is correct"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"issue-import-errors-in-python-packages",children:"Issue: Import errors in Python packages"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Ensure the package was built with ",(0,a.jsx)(n.code,{children:"colcon build"})]}),"\n",(0,a.jsxs)(n.li,{children:["Check that the ",(0,a.jsx)(n.code,{children:"__init__.py"})," files are present"]}),"\n",(0,a.jsx)(n.li,{children:"Verify that the package name in setup.py matches the directory name"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"issue-dependencies-not-found",children:"Issue: Dependencies not found"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Add dependencies to ",(0,a.jsx)(n.code,{children:"package.xml"})]}),"\n",(0,a.jsxs)(n.li,{children:["Run ",(0,a.jsx)(n.code,{children:"rosdep install --from-paths src --ignore-src -r -y"})," to install dependencies"]}),"\n",(0,a.jsx)(n.li,{children:"Rebuild the package after adding dependencies"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"issue-console-scripts-not-available",children:"Issue: Console scripts not available"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Make sure entry points are properly defined in ",(0,a.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,a.jsx)(n.li,{children:"Verify the function exists and has the correct signature"}),"\n",(0,a.jsx)(n.li,{children:"Rebuild the package after updating setup.py"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Packages are the fundamental unit for organizing ROS 2 software"}),"\n",(0,a.jsx)(n.li,{children:"Proper package structure improves maintainability and reusability"}),"\n",(0,a.jsxs)(n.li,{children:["Dependencies must be declared in ",(0,a.jsx)(n.code,{children:"package.xml"})," and ",(0,a.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,a.jsx)(n.li,{children:"Launch files simplify running multiple nodes together"}),"\n",(0,a.jsx)(n.li,{children:"Configuration files separate parameters from code"}),"\n",(0,a.jsxs)(n.li,{children:["Use ",(0,a.jsx)(n.code,{children:"colcon build"})," to compile packages"]}),"\n",(0,a.jsx)(n.li,{children:"Always source the workspace after building"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsx)(n.p,{children:"In the next chapter, you'll learn about simulation with Gazebo, which will allow you to test your ROS 2 packages in a virtual environment before deploying to real hardware."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},7074:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>t});var s=r(6540);const a={},i=s.createContext(a);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);