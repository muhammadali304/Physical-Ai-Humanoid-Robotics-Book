"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[1985],{7074:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(6540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},7977:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"setup/running-examples","title":"Running and Testing ROS 2 Publisher/Subscriber Examples","description":"Overview","source":"@site/docs/setup/running-examples.md","sourceDirName":"setup","slug":"/setup/running-examples","permalink":"/docs/setup/running-examples","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/setup/running-examples.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Workspace Structure","permalink":"/docs/setup/ros2-workspace-structure"},"next":{"title":"Performance Benchmark Guide for ROS 2 Environment Setup","permalink":"/docs/setup/performance-benchmark"}}');var r=s(4848),t=s(7074);const l={},o="Running and Testing ROS 2 Publisher/Subscriber Examples",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Directory Structure",id:"directory-structure",level:2},{value:"Running Python Examples",id:"running-python-examples",level:2},{value:"Method 1: Direct Python Execution",id:"method-1-direct-python-execution",level:3},{value:"Running the Publisher (Terminal 1)",id:"running-the-publisher-terminal-1",level:4},{value:"Running the Subscriber (Terminal 2)",id:"running-the-subscriber-terminal-2",level:4},{value:"Method 2: Using ROS 2 Run Command",id:"method-2-using-ros-2-run-command",level:3},{value:"Running C++ Examples",id:"running-c-examples",level:2},{value:"Building the C++ Package",id:"building-the-c-package",level:3},{value:"Running the Built Examples",id:"running-the-built-examples",level:3},{value:"Running the Publisher (Terminal 1)",id:"running-the-publisher-terminal-1-1",level:4},{value:"Running the Subscriber (Terminal 2)",id:"running-the-subscriber-terminal-2-1",level:4},{value:"Testing the Examples",id:"testing-the-examples",level:2},{value:"1. Basic Communication Test",id:"1-basic-communication-test",level:3},{value:"2. Topic Verification",id:"2-topic-verification",level:3},{value:"3. Node Verification",id:"3-node-verification",level:3},{value:"4. Quality of Service (QoS) Verification",id:"4-quality-of-service-qos-verification",level:3},{value:"Advanced Testing",id:"advanced-testing",level:2},{value:"Testing with Multiple Nodes",id:"testing-with-multiple-nodes",level:3},{value:"Testing Message Rates",id:"testing-message-rates",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"Issue 1: &quot;Command not found&quot; errors",id:"issue-1-command-not-found-errors",level:3},{value:"Issue 2: Nodes can&#39;t communicate",id:"issue-2-nodes-cant-communicate",level:3},{value:"Issue 3: Build errors for C++ examples",id:"issue-3-build-errors-for-c-examples",level:3},{value:"Issue 4: Python import errors",id:"issue-4-python-import-errors",level:3},{value:"Performance Testing",id:"performance-testing",level:2},{value:"Monitoring Resource Usage",id:"monitoring-resource-usage",level:3},{value:"Message Throughput Testing",id:"message-throughput-testing",level:3},{value:"Expected Output",id:"expected-output",level:2},{value:"Publisher Output",id:"publisher-output",level:3},{value:"Subscriber Output",id:"subscriber-output",level:3},{value:"Verification Checklist",id:"verification-checklist",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"running-and-testing-ros-2-publishersubscriber-examples",children:"Running and Testing ROS 2 Publisher/Subscriber Examples"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This guide provides detailed instructions for running and testing the ROS 2 publisher/subscriber examples created for the Physical AI & Humanoid Robotics educational book. The examples demonstrate fundamental ROS 2 communication patterns using both Python and C++."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before running the examples, ensure you have:"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","ROS 2 Humble Hawksbill installed and configured"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Python 3.8+ environment set up"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","C++ development tools installed"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Basic ROS 2 workspace created (",(0,r.jsx)(n.code,{children:"~/ros2_ws"}),")"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Environment properly sourced"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,r.jsx)(n.p,{children:"Make sure your examples are in the correct location:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"~/ros2_ws/src/\n\u2514\u2500\u2500 ros2_basics_examples/          # C++ examples package\n    \u251c\u2500\u2500 CMakeLists.txt\n    \u251c\u2500\u2500 package.xml\n    \u251c\u2500\u2500 talker.cpp\n    \u2514\u2500\u2500 listener.cpp\n\n~/ros2_ws/examples/ros2_basics/     # Python examples\n    \u251c\u2500\u2500 talker_node.py\n    \u251c\u2500\u2500 listener_node.py\n    \u251c\u2500\u2500 talker_listener.py\n    \u2514\u2500\u2500 README.md\n"})}),"\n",(0,r.jsx)(n.h2,{id:"running-python-examples",children:"Running Python Examples"}),"\n",(0,r.jsx)(n.h3,{id:"method-1-direct-python-execution",children:"Method 1: Direct Python Execution"}),"\n",(0,r.jsx)(n.h4,{id:"running-the-publisher-terminal-1",children:"Running the Publisher (Terminal 1)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Source ROS 2 environment\nsource /opt/ros/humble/setup.bash\n\n# Navigate to the examples directory\ncd ~/ros2_ws\n\n# Run the talker node\npython3 examples/ros2_basics/talker_node.py\n"})}),"\n",(0,r.jsx)(n.h4,{id:"running-the-subscriber-terminal-2",children:"Running the Subscriber (Terminal 2)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Source ROS 2 environment\nsource /opt/ros/humble/setup.bash\n\n# Navigate to the examples directory\ncd ~/ros2_ws\n\n# Run the listener node\npython3 examples/ros2_basics/listener_node.py\n"})}),"\n",(0,r.jsx)(n.h3,{id:"method-2-using-ros-2-run-command",children:"Method 2: Using ROS 2 Run Command"}),"\n",(0,r.jsx)(n.p,{children:"First, ensure your Python files are executable and in a proper ROS 2 package structure, then:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Source ROS 2 environment\nsource /opt/ros/humble/setup.bash\n\n# Run publisher\nros2 run your_package_name talker_node.py\n\n# Run subscriber\nros2 run your_package_name listener_node.py\n"})}),"\n",(0,r.jsx)(n.h2,{id:"running-c-examples",children:"Running C++ Examples"}),"\n",(0,r.jsx)(n.h3,{id:"building-the-c-package",children:"Building the C++ Package"}),"\n",(0,r.jsx)(n.p,{children:"Before running C++ examples, you need to build them:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Source ROS 2 environment\nsource /opt/ros/humble/setup.bash\n\n# Navigate to your workspace\ncd ~/ros2_ws\n\n# Copy the C++ package to src directory if not already there\ncp -r examples/ros2_basics src/ros2_basics_examples\n\n# Build the package\ncolcon build --packages-select ros2_basics_examples\n\n# Source the workspace\nsource install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h3,{id:"running-the-built-examples",children:"Running the Built Examples"}),"\n",(0,r.jsx)(n.h4,{id:"running-the-publisher-terminal-1-1",children:"Running the Publisher (Terminal 1)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Source the workspace with built examples\nsource ~/ros2_ws/install/setup.bash\n\n# Run the talker executable\nros2 run ros2_basics_examples talker\n"})}),"\n",(0,r.jsx)(n.h4,{id:"running-the-subscriber-terminal-2-1",children:"Running the Subscriber (Terminal 2)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Source the workspace with built examples\nsource ~/ros2_ws/install/setup.bash\n\n# Run the listener executable\nros2 run ros2_basics_examples listener\n"})}),"\n",(0,r.jsx)(n.h2,{id:"testing-the-examples",children:"Testing the Examples"}),"\n",(0,r.jsx)(n.h3,{id:"1-basic-communication-test",children:"1. Basic Communication Test"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Expected Behavior:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Publisher sends "Hello World: X" messages every 0.5 seconds'}),"\n",(0,r.jsx)(n.li,{children:"Subscriber receives and logs the messages"}),"\n",(0,r.jsx)(n.li,{children:"Both nodes should run without errors"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Verification Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Start the publisher in Terminal 1"}),"\n",(0,r.jsx)(n.li,{children:"Start the subscriber in Terminal 2"}),"\n",(0,r.jsx)(n.li,{children:"Observe messages being published and received"}),"\n",(0,r.jsx)(n.li,{children:"Stop both nodes with Ctrl+C"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-topic-verification",children:"2. Topic Verification"}),"\n",(0,r.jsx)(n.p,{children:"Check that topics are being created and messages are flowing:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List all topics\nros2 topic list\n\n# You should see:\n# /chatter\n# /parameter_events\n# /rosout\n\n# Check the type of the chatter topic\nros2 topic type /chatter\n# Should return: std_msgs/msg/String\n\n# Echo messages on the chatter topic\nros2 topic echo /chatter\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-node-verification",children:"3. Node Verification"}),"\n",(0,r.jsx)(n.p,{children:"Verify that nodes are running correctly:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List all nodes\nros2 node list\n\n# You should see your nodes:\n# /talker_node (or /listener_node depending on which is running)\n\n# Get information about a specific node\nros2 node info /talker_node\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-quality-of-service-qos-verification",children:"4. Quality of Service (QoS) Verification"}),"\n",(0,r.jsx)(n.p,{children:"Check the QoS settings of your publisher/subscriber:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check publisher info\nros2 topic info /chatter -v\n\n# This will show publisher and subscriber information\n"})}),"\n",(0,r.jsx)(n.h2,{id:"advanced-testing",children:"Advanced Testing"}),"\n",(0,r.jsx)(n.h3,{id:"testing-with-multiple-nodes",children:"Testing with Multiple Nodes"}),"\n",(0,r.jsx)(n.p,{children:"Run multiple subscribers to test one-to-many communication:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Publisher\nros2 run ros2_basics_examples talker\n\n# Terminal 2: Subscriber 1\nros2 run ros2_basics_examples listener\n\n# Terminal 3: Subscriber 2\nros2 run ros2_basics_examples listener\n"})}),"\n",(0,r.jsx)(n.p,{children:"All subscribers should receive the same messages from the single publisher."}),"\n",(0,r.jsx)(n.h3,{id:"testing-message-rates",children:"Testing Message Rates"}),"\n",(0,r.jsx)(n.p,{children:"Monitor message rates using ROS 2 tools:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check message rate\nros2 topic hz /chatter\n\n# Check message delay\nros2 topic delay /chatter\n"})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsx)(n.h3,{id:"issue-1-command-not-found-errors",children:'Issue 1: "Command not found" errors'}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," ",(0,r.jsx)(n.code,{children:"ros2: command not found"})," or ",(0,r.jsx)(n.code,{children:"talker: command not found"}),"\n",(0,r.jsx)(n.strong,{children:"Solutions:"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Ensure ROS 2 environment is sourced\nsource /opt/ros/humble/setup.bash\n\n# For C++ examples, ensure workspace is built and sourced\ncd ~/ros2_ws\nsource install/setup.bash\n"})}),"\n",(0,r.jsx)(n.h3,{id:"issue-2-nodes-cant-communicate",children:"Issue 2: Nodes can't communicate"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Publisher runs but subscriber doesn't receive messages\n",(0,r.jsx)(n.strong,{children:"Solutions:"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check if both nodes are on the same ROS_DOMAIN_ID\necho $ROS_DOMAIN_ID\n\n# Verify topic names match\nros2 topic list\n\n# Check if firewall is blocking communication\n# Temporarily disable firewall for testing\n"})}),"\n",(0,r.jsx)(n.h3,{id:"issue-3-build-errors-for-c-examples",children:"Issue 3: Build errors for C++ examples"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," Compilation errors when building C++ package\n",(0,r.jsx)(n.strong,{children:"Solutions:"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Clean the build directory\nrm -rf build/ install/ log/\n\n# Ensure dependencies are installed\nsudo apt update\nsudo apt install build-essential cmake\n\n# Rebuild\ncolcon build --packages-select ros2_basics_examples\n"})}),"\n",(0,r.jsx)(n.h3,{id:"issue-4-python-import-errors",children:"Issue 4: Python import errors"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms:"})," ",(0,r.jsx)(n.code,{children:"ModuleNotFoundError: No module named 'rclpy'"}),"\n",(0,r.jsx)(n.strong,{children:"Solutions:"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Ensure ROS 2 environment is sourced\nsource /opt/ros/humble/setup.bash\n\n# Check Python path\npython3 -c \"import rclpy; print('rclpy imported successfully')\"\n"})}),"\n",(0,r.jsx)(n.h2,{id:"performance-testing",children:"Performance Testing"}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-resource-usage",children:"Monitoring Resource Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Monitor CPU and memory usage of ROS 2 processes\nhtop\n\n# Check network usage\niftop -i lo  # for local communication\n"})}),"\n",(0,r.jsx)(n.h3,{id:"message-throughput-testing",children:"Message Throughput Testing"}),"\n",(0,r.jsx)(n.p,{children:"For performance evaluation, you can modify the examples to send larger messages or increase the frequency to test throughput."}),"\n",(0,r.jsx)(n.h2,{id:"expected-output",children:"Expected Output"}),"\n",(0,r.jsx)(n.h3,{id:"publisher-output",children:"Publisher Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[INFO] [1612345678.123456789] [talker_node]: Publishing: 'Hello World: 0'\n[INFO] [1612345679.123456789] [talker_node]: Publishing: 'Hello World: 1'\n[INFO] [1612345680.123456789] [talker_node]: Publishing: 'Hello World: 2'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscriber-output",children:"Subscriber Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[INFO] [1612345678.123456789] [listener_node]: I heard: 'Hello World: 0'\n[INFO] [1612345679.123456789] [listener_node]: I heard: 'Hello World: 1'\n[INFO] [1612345680.123456789] [listener_node]: I heard: 'Hello World: 2'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"verification-checklist",children:"Verification Checklist"}),"\n",(0,r.jsx)(n.p,{children:"Before proceeding, verify that:"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Publisher node starts without errors"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Subscriber node starts without errors"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Messages are successfully published and received"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Both Python and C++ examples work as expected"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Topics are correctly created and accessible"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Nodes appear in the ROS 2 node list"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Communication follows expected timing (0.5 second intervals)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"After successfully running and testing these basic examples:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Explore more complex message types"}),"\n",(0,r.jsx)(n.li,{children:"Learn about ROS 2 services and actions"}),"\n",(0,r.jsx)(n.li,{children:"Create your own custom message types"}),"\n",(0,r.jsx)(n.li,{children:"Move on to more advanced robotics examples"}),"\n",(0,r.jsx)(n.li,{children:"Integrate with simulation environments like Gazebo"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials.html",children:"ROS 2 Tutorials"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts.html",children:"ROS 2 Concepts"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Reference/CLI-Tools.html",children:"ROS 2 CLI Tools"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html",children:"ROS 2 Quality of Service"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," Always remember to source your ROS 2 environment before running any ROS 2 commands. The examples demonstrate fundamental ROS 2 concepts that form the basis for more complex robotics applications."]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);