"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[7425],{3692:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"simulation/urdf-modeling","title":"URDF Modeling - Robot Description Format","description":"Learning Objectives","source":"@site/docs/simulation/urdf-modeling.md","sourceDirName":"simulation","slug":"/simulation/urdf-modeling","permalink":"/docs/simulation/urdf-modeling","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/simulation/urdf-modeling.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Gazebo Simulation - Basics","permalink":"/docs/simulation/gazebo-basics"},"next":{"title":"Custom World Creation with SDF Format and Obstacles","permalink":"/docs/simulation/custom-world-creation"}}');var s=r(4848),o=r(7074);const l={sidebar_position:3},t="URDF Modeling - Robot Description Format",a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Conceptual Overview",id:"conceptual-overview",level:2},{value:"URDF Structure",id:"urdf-structure",level:3},{value:"Why URDF is Important",id:"why-urdf-is-important",level:3},{value:"Hands-On Implementation",id:"hands-on-implementation",level:2},{value:"Basic URDF Structure",id:"basic-urdf-structure",level:3},{value:"Understanding Link Elements",id:"understanding-link-elements",level:3},{value:"Visual Element",id:"visual-element",level:4},{value:"Collision Element",id:"collision-element",level:4},{value:"Inertial Element",id:"inertial-element",level:4},{value:"Joint Types and Properties",id:"joint-types-and-properties",level:3},{value:"Example Joint Definitions",id:"example-joint-definitions",level:4},{value:"Creating a More Complex Robot Model",id:"creating-a-more-complex-robot-model",level:3},{value:"Adding Sensors to URDF",id:"adding-sensors-to-urdf",level:3},{value:"Using Xacro for Complex Models",id:"using-xacro-for-complex-models",level:3},{value:"Creating a Complete Robot Package",id:"creating-a-complete-robot-package",level:3},{value:"Testing &amp; Verification",id:"testing--verification",level:2},{value:"Validating URDF Files",id:"validating-urdf-files",level:3},{value:"Useful URDF Commands",id:"useful-urdf-commands",level:3},{value:"Common Validation Steps",id:"common-validation-steps",level:3},{value:"Common Issues",id:"common-issues",level:2},{value:"Issue: URDF fails to load or parse",id:"issue-urdf-fails-to-load-or-parse",level:3},{value:"Issue: Robot appears distorted or with wrong proportions",id:"issue-robot-appears-distorted-or-with-wrong-proportions",level:3},{value:"Issue: Physics simulation is unstable",id:"issue-physics-simulation-is-unstable",level:3},{value:"Issue: Joint limits not working in simulation",id:"issue-joint-limits-not-working-in-simulation",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"urdf-modeling---robot-description-format",children:"URDF Modeling - Robot Description Format"})}),"\n",(0,s.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(e.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Understand the Unified Robot Description Format (URDF) structure and syntax"}),"\n",(0,s.jsx)(e.li,{children:"Create complex robot models with multiple links and joints"}),"\n",(0,s.jsx)(e.li,{children:"Add visual, collision, and inertial properties to robot models"}),"\n",(0,s.jsx)(e.li,{children:"Include sensors and actuators in URDF descriptions"}),"\n",(0,s.jsx)(e.li,{children:"Validate and debug URDF models"}),"\n",(0,s.jsx)(e.li,{children:"Use Xacro macros to simplify complex robot descriptions"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(e.p,{children:"Before starting this chapter, you should:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Understand ROS 2 nodes, topics, and packages"}),"\n",(0,s.jsx)(e.li,{children:"Have basic knowledge of 3D geometry and coordinate systems"}),"\n",(0,s.jsx)(e.li,{children:"Completed the simulation chapters (Gazebo and Unity)"}),"\n",(0,s.jsx)(e.li,{children:"Basic familiarity with XML syntax"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"conceptual-overview",children:"Conceptual Overview"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"URDF (Unified Robot Description Format)"})," is an XML-based format used to describe robots in ROS. It defines the physical and visual properties of a robot including:"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Links"}),": Rigid parts of the robot (e.g., chassis, wheels, arms)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Joints"}),": Connections between links (e.g., revolute, prismatic, fixed)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Visual properties"}),": How the robot appears in simulation"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Collision properties"}),": How the robot interacts physically"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Inertial properties"}),": Mass, center of mass, and inertia for physics simulation"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Sensors and actuators"}),": For simulation and control"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"urdf-structure",children:"URDF Structure"}),"\n",(0,s.jsx)(e.p,{children:"A URDF file typically contains:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Robot name and basic properties"}),"\n",(0,s.jsx)(e.li,{children:"Link definitions (visual, collision, inertial)"}),"\n",(0,s.jsx)(e.li,{children:"Joint definitions (parent-child relationships)"}),"\n",(0,s.jsx)(e.li,{children:"Material definitions"}),"\n",(0,s.jsx)(e.li,{children:"Transmission elements (for control)"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"why-urdf-is-important",children:"Why URDF is Important"}),"\n",(0,s.jsx)(e.p,{children:"URDF is crucial for:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Simulation"}),": Accurate physics and visualization in Gazebo/Unity"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Robot State Publishing"}),": TF transforms for coordinate frames"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Motion Planning"}),": MoveIt! uses URDF for kinematic models"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Control"}),": Joint limits and dynamics for controllers"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Visualization"}),": RViz displays robot models in proper poses"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"hands-on-implementation",children:"Hands-On Implementation"}),"\n",(0,s.jsx)(e.h3,{id:"basic-urdf-structure",children:"Basic URDF Structure"}),"\n",(0,s.jsx)(e.p,{children:"Let's start with a simple URDF example that includes the essential elements:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"simple_robot.urdf:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="simple_robot">\r\n  \x3c!-- Base link - the main body of the robot --\x3e\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.5 0.3 0.15"/>\r\n      </geometry>\r\n      <material name="blue">\r\n        <color rgba="0 0 1 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.5 0.3 0.15"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- A simple wheel --\x3e\r\n  <link name="wheel">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.1" length="0.05"/>\r\n      </geometry>\r\n      <material name="black">\r\n        <color rgba="0 0 0 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.1" length="0.05"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.2"/>\r\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Joint connecting wheel to base --\x3e\r\n  <joint name="wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="wheel"/>\r\n    <origin xyz="0 0.2 -0.05" rpy="1.5707 0 0"/>\r\n    <axis xyz="0 0 1"/>\r\n  </joint>\r\n</robot>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"understanding-link-elements",children:"Understanding Link Elements"}),"\n",(0,s.jsx)(e.h4,{id:"visual-element",children:"Visual Element"}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"<visual>"})," element defines how the link appears in visualization:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<visual>\r\n  <origin xyz="0 0 0" rpy="0 0 0"/>\r\n  <geometry>\r\n    <box size="1 1 1"/>\r\n    \x3c!-- Other options: <sphere radius="1"/>, <cylinder radius="1" length="1"/> --\x3e\r\n  </geometry>\r\n  <material name="red">\r\n    <color rgba="1 0 0 1"/>\r\n  </material>\r\n</visual>\n'})}),"\n",(0,s.jsx)(e.h4,{id:"collision-element",children:"Collision Element"}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"<collision>"})," element defines the physical boundaries for collision detection:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<collision>\r\n  <origin xyz="0 0 0" rpy="0 0 0"/>\r\n  <geometry>\r\n    <box size="1 1 1"/>\r\n  </geometry>\r\n</collision>\n'})}),"\n",(0,s.jsx)(e.h4,{id:"inertial-element",children:"Inertial Element"}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"<inertial>"})," element defines physical properties for simulation:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<inertial>\r\n  <mass value="1.0"/>\r\n  <origin xyz="0 0 0" rpy="0 0 0"/>\r\n  <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\r\n</inertial>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"joint-types-and-properties",children:"Joint Types and Properties"}),"\n",(0,s.jsx)(e.p,{children:"URDF supports several joint types:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Fixed"}),": No movement (0 DOF)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Revolute"}),": Rotational joint with limits (1 DOF)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Continuous"}),": Rotational joint without limits (1 DOF)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Prismatic"}),": Linear sliding joint (1 DOF)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Planar"}),": Movement in a plane (2 DOF)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Floating"}),": Free movement in 3D space (6 DOF)"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"example-joint-definitions",children:"Example Joint Definitions"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'\x3c!-- Fixed joint (no movement) --\x3e\r\n<joint name="fixed_joint" type="fixed">\r\n  <parent link="base_link"/>\r\n  <child link="sensor_mount"/>\r\n  <origin xyz="0.1 0 0.1" rpy="0 0 0"/>\r\n</joint>\r\n\r\n\x3c!-- Revolute joint (rotational with limits) --\x3e\r\n<joint name="arm_joint" type="revolute">\r\n  <parent link="base_link"/>\r\n  <child link="arm_link"/>\r\n  <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n  <axis xyz="0 0 1"/>\r\n  <limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>\r\n</joint>\r\n\r\n\x3c!-- Continuous joint (rotational without limits) --\x3e\r\n<joint name="wheel_joint" type="continuous">\r\n  <parent link="base_link"/>\r\n  <child link="wheel"/>\r\n  <origin xyz="0 0.2 -0.05" rpy="1.5707 0 0"/>\r\n  <axis xyz="0 0 1"/>\r\n</joint>\r\n\r\n\x3c!-- Prismatic joint (linear sliding) --\x3e\r\n<joint name="slider_joint" type="prismatic">\r\n  <parent link="base_link"/>\r\n  <child link="slider"/>\r\n  <origin xyz="0.1 0 0" rpy="0 0 0"/>\r\n  <axis xyz="1 0 0"/>\r\n  <limit lower="0" upper="0.5" effort="100.0" velocity="0.5"/>\r\n</joint>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"creating-a-more-complex-robot-model",children:"Creating a More Complex Robot Model"}),"\n",(0,s.jsx)(e.p,{children:"Let's create a differential drive robot with sensors:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"diff_robot.urdf:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="diff_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">\r\n  \x3c!-- Constants --\x3e\r\n  <xacro:property name="M_PI" value="3.1415926535897931" />\r\n\r\n  \x3c!-- Robot base --\x3e\r\n  <link name="base_link">\r\n    <visual>\r\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.4 0.3 0.1"/>\r\n      </geometry>\r\n      <material name="light_grey">\r\n        <color rgba="0.7 0.7 0.7 1.0"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.4 0.3 0.1"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="5.0"/>\r\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.3"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Left wheel --\x3e\r\n  <link name="left_wheel">\r\n    <visual>\r\n      <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.04"/>\r\n      </geometry>\r\n      <material name="black">\r\n        <color rgba="0 0 0 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.04"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.5"/>\r\n      <origin xyz="0 0 0"/>\r\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Right wheel --\x3e\r\n  <link name="right_wheel">\r\n    <visual>\r\n      <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.04"/>\r\n      </geometry>\r\n      <material name="black">\r\n        <color rgba="0 0 0 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.04"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.5"/>\r\n      <origin xyz="0 0 0"/>\r\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Left wheel joint --\x3e\r\n  <joint name="left_wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="left_wheel"/>\r\n    <origin xyz="0 0.15 -0.05" rpy="0 0 0"/>\r\n    <axis xyz="0 0 1"/>\r\n  </joint>\r\n\r\n  \x3c!-- Right wheel joint --\x3e\r\n  <joint name="right_wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="right_wheel"/>\r\n    <origin xyz="0 -0.15 -0.05" rpy="0 0 0"/>\r\n    <axis xyz="0 0 1"/>\r\n  </joint>\r\n\r\n  \x3c!-- Camera link --\x3e\r\n  <link name="camera_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.05 0.05 0.03"/>\r\n      </geometry>\r\n      <material name="red">\r\n        <color rgba="1 0 0 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.05 0.05 0.03"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.1"/>\r\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Camera joint --\x3e\r\n  <joint name="camera_joint" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="camera_link"/>\r\n    <origin xyz="0.15 0 0.1" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Hokuyo Laser Scanner --\x3e\r\n  <link name="laser_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.05 0.05 0.05"/>\r\n      </geometry>\r\n      <material name="blue">\r\n        <color rgba="0 0 1 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.05 0.05 0.05"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.1"/>\r\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Laser joint --\x3e\r\n  <joint name="laser_joint" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="laser_link"/>\r\n    <origin xyz="0.15 0 0.15" rpy="0 0 0"/>\r\n  </joint>\r\n</robot>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"adding-sensors-to-urdf",children:"Adding Sensors to URDF"}),"\n",(0,s.jsx)(e.p,{children:"To include sensors in your URDF, you typically add Gazebo plugins:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"diff_robot_with_sensors.urdf (with Gazebo plugins):"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="diff_robot_with_sensors" xmlns:xacro="http://www.ros.org/wiki/xacro">\r\n  \x3c!-- Include the previous robot definition --\x3e\r\n  \x3c!-- ... (previous robot definition here) ... --\x3e\r\n\r\n  \x3c!-- Gazebo plugin for differential drive --\x3e\r\n  <gazebo>\r\n    <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">\r\n      <ros>\r\n        <namespace>diff_robot</namespace>\r\n        <remapping>cmd_vel:=cmd_vel</remapping>\r\n        <remapping>odom:=odom</remapping>\r\n      </ros>\r\n      <update_rate>30</update_rate>\r\n      <left_joint>left_wheel_joint</left_joint>\r\n      <right_joint>right_wheel_joint</right_joint>\r\n      <wheel_separation>0.3</wheel_separation>\r\n      <wheel_diameter>0.1</wheel_diameter>\r\n      <max_wheel_torque>20</max_wheel_torque>\r\n      <max_wheel_acceleration>1.0</max_wheel_acceleration>\r\n      <publish_odom>true</publish_odom>\r\n      <publish_odom_tf>true</publish_odom_tf>\r\n      <publish_wheel_tf>true</publish_wheel_tf>\r\n      <odometry_frame>odom</odometry_frame>\r\n      <robot_base_frame>base_link</robot_base_frame>\r\n    </plugin>\r\n  </gazebo>\r\n\r\n  \x3c!-- Gazebo plugin for camera --\x3e\r\n  <gazebo reference="camera_link">\r\n    <sensor name="camera" type="camera">\r\n      <update_rate>30</update_rate>\r\n      <camera name="head">\r\n        <horizontal_fov>1.3962634</horizontal_fov>\r\n        <image>\r\n          <width>800</width>\r\n          <height>600</height>\r\n          <format>R8G8B8</format>\r\n        </image>\r\n        <clip>\r\n          <near>0.02</near>\r\n          <far>300</far>\r\n        </clip>\r\n      </camera>\r\n      <plugin name="camera_controller" filename="libgazebo_ros_camera.so">\r\n        <ros>\r\n          <namespace>diff_robot</namespace>\r\n          <remapping>image_raw:=camera/image_raw</remapping>\r\n          <remapping>camera_info:=camera/camera_info</remapping>\r\n        </ros>\r\n        <camera_name>camera</camera_name>\r\n        <frame_name>camera_link</frame_name>\r\n        <hack_baseline>0.07</hack_baseline>\r\n        <distortion_k1>0.0</distortion_k1>\r\n        <distortion_k2>0.0</distortion_k2>\r\n        <distortion_k3>0.0</distortion_k3>\r\n        <distortion_t1>0.0</distortion_t1>\r\n        <distortion_t2>0.0</distortion_t2>\r\n      </plugin>\r\n    </sensor>\r\n  </gazebo>\r\n\r\n  \x3c!-- Gazebo plugin for laser scanner --\x3e\r\n  <gazebo reference="laser_link">\r\n    <sensor name="laser" type="ray">\r\n      <pose>0 0 0 0 0 0</pose>\r\n      <visualize>true</visualize>\r\n      <update_rate>40</update_rate>\r\n      <ray>\r\n        <scan>\r\n          <horizontal>\r\n            <samples>720</samples>\r\n            <resolution>1</resolution>\r\n            <min_angle>-1.570796</min_angle>\r\n            <max_angle>1.570796</max_angle>\r\n          </horizontal>\r\n        </scan>\r\n        <range>\r\n          <min>0.10</min>\r\n          <max>30.0</max>\r\n          <resolution>0.01</resolution>\r\n        </range>\r\n      </ray>\r\n      <plugin name="laser_controller" filename="libgazebo_ros_ray_sensor.so">\r\n        <ros>\r\n          <namespace>diff_robot</namespace>\r\n          <remapping>scan:=scan</remapping>\r\n        </ros>\r\n        <output_type>sensor_msgs/LaserScan</output_type>\r\n        <frame_name>laser_link</frame_name>\r\n      </plugin>\r\n    </sensor>\r\n  </gazebo>\r\n</robot>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"using-xacro-for-complex-models",children:"Using Xacro for Complex Models"}),"\n",(0,s.jsx)(e.p,{children:"Xacro is a macro language for URDF that allows for:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Parameterization"}),"\n",(0,s.jsx)(e.li,{children:"Reusable components"}),"\n",(0,s.jsx)(e.li,{children:"Cleaner code"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Create a wheel macro (wheel.xacro):"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro">\r\n  <xacro:macro name="wheel" params="prefix parent *origin radius length mass">\r\n    <link name="${prefix}_wheel">\r\n      <visual>\r\n        <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\r\n        <geometry>\r\n          <cylinder radius="${radius}" length="${length}"/>\r\n        </geometry>\r\n        <material name="black">\r\n          <color rgba="0 0 0 1"/>\r\n        </material>\r\n      </visual>\r\n      <collision>\r\n        <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\r\n        <geometry>\r\n          <cylinder radius="${radius}" length="${length}"/>\r\n        </geometry>\r\n      </collision>\r\n      <inertial>\r\n        <mass value="${mass}"/>\r\n        <origin xyz="0 0 0"/>\r\n        <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>\r\n      </inertial>\r\n    </link>\r\n\r\n    <joint name="${prefix}_wheel_joint" type="continuous">\r\n      <parent link="${parent}"/>\r\n      <child link="${prefix}_wheel"/>\r\n      <xacro:insert_block name="origin"/>\r\n      <axis xyz="0 0 1"/>\r\n    </joint>\r\n  </xacro:macro>\r\n</robot>\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Use the macro in your main URDF:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="diff_robot_xacro" xmlns:xacro="http://www.ros.org/wiki/xacro">\r\n  \x3c!-- Include the wheel macro --\x3e\r\n  <xacro:include filename="wheel.xacro"/>\r\n\r\n  \x3c!-- Constants --\x3e\r\n  <xacro:property name="M_PI" value="3.1415926535897931" />\r\n\r\n  \x3c!-- Robot base --\x3e\r\n  <link name="base_link">\r\n    <visual>\r\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.4 0.3 0.1"/>\r\n      </geometry>\r\n      <material name="light_grey">\r\n        <color rgba="0.7 0.7 0.7 1.0"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.4 0.3 0.1"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="5.0"/>\r\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.3"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Use the wheel macro for left wheel --\x3e\r\n  <xacro:wheel prefix="left" parent="base_link" radius="0.05" length="0.04" mass="0.5">\r\n    <origin xyz="0 0.15 -0.05" rpy="0 0 0"/>\r\n  </xacro:wheel>\r\n\r\n  \x3c!-- Use the wheel macro for right wheel --\x3e\r\n  <xacro:wheel prefix="right" parent="base_link" radius="0.05" length="0.04" mass="0.5">\r\n    <origin xyz="0 -0.15 -0.05" rpy="0 0 0"/>\r\n  </xacro:wheel>\r\n</robot>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"creating-a-complete-robot-package",children:"Creating a Complete Robot Package"}),"\n",(0,s.jsx)(e.p,{children:"Let's create a proper ROS 2 package for our robot model:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Create the package:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\nros2 pkg create --build-type ament_cmake robot_description\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Create the URDF directory structure:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src/robot_description/urdf\r\nmkdir -p ~/ros2_ws/src/robot_description/meshes\r\nmkdir -p ~/ros2_ws/src/robot_description/config\r\nmkdir -p ~/ros2_ws/src/robot_description/launch\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Add your URDF files to the urdf directory"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Update package.xml:"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\r\n<package format="3">\r\n  <name>robot_description</name>\r\n  <version>0.0.1</version>\r\n  <description>URDF description for a differential drive robot</description>\r\n  <maintainer email="user@todo.todo">user</maintainer>\r\n  <license>Apache-2.0</license>\r\n\r\n  <exec_depend>xacro</exec_depend>\r\n  <exec_depend>joint_state_publisher</exec_depend>\r\n  <exec_depend>robot_state_publisher</exec_depend>\r\n  <exec_depend>rviz2</exec_depend>\r\n\r\n  <export>\r\n    <build_type>ament_cmake</build_type>\r\n  </export>\r\n</package>\n'})}),"\n",(0,s.jsxs)(e.ol,{start:"5",children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Create a launch file to visualize the robot:"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"robot_description/launch/robot_display.launch.py:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\r\nfrom launch_ros.actions import Node\r\nfrom launch_ros.substitutions import FindPackageShare\r\n\r\n\r\ndef generate_launch_description():\r\n    # Declare arguments\r\n    declared_arguments = []\r\n    declared_arguments.append(\r\n        DeclareLaunchArgument(\r\n            'use_sim_time',\r\n            default_value='false',\r\n            description='Use simulation time if true.'\r\n        )\r\n    )\r\n\r\n    # Launch configurations\r\n    use_sim_time = LaunchConfiguration('use_sim_time')\r\n\r\n    # Get URDF via xacro\r\n    robot_description_content = PathJoinSubstitution([\r\n        FindPackageShare('robot_description'),\r\n        'urdf',\r\n        'diff_robot.urdf.xacro'  # assuming your file is named this way\r\n    ])\r\n\r\n    robot_state_publisher_node = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        parameters=[\r\n            {'use_sim_time': use_sim_time},\r\n            {'robot_description': robot_description_content}\r\n        ]\r\n    )\r\n\r\n    # Joint state publisher for visualization\r\n    joint_state_publisher_node = Node(\r\n        package='joint_state_publisher',\r\n        executable='joint_state_publisher',\r\n        parameters=[{'use_sim_time': use_sim_time}]\r\n    )\r\n\r\n    # RViz2 for visualization\r\n    rviz_config_file = PathJoinSubstitution([\r\n        FindPackageShare('robot_description'),\r\n        'config',\r\n        'robot_display.rviz'\r\n    ])\r\n\r\n    rviz_node = Node(\r\n        package='rviz2',\r\n        executable='rviz2',\r\n        name='rviz2',\r\n        arguments=['-d', rviz_config_file],\r\n        parameters=[{'use_sim_time': use_sim_time}],\r\n        output='screen'\r\n    )\r\n\r\n    nodes = [\r\n        robot_state_publisher_node,\r\n        joint_state_publisher_node,\r\n        rviz_node\r\n    ]\r\n\r\n    return LaunchDescription(declared_arguments + nodes)\n"})}),"\n",(0,s.jsx)(e.h2,{id:"testing--verification",children:"Testing & Verification"}),"\n",(0,s.jsx)(e.h3,{id:"validating-urdf-files",children:"Validating URDF Files"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Check URDF syntax:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Check if URDF is well-formed\r\ncheck_urdf $(ros2 pkg prefix robot_description)/share/robot_description/urdf/diff_robot.urdf\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Visualize the robot:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Source your workspace\r\ncd ~/ros2_ws\r\nsource install/setup.bash\r\n\r\n# Launch the display\r\nros2 launch robot_description robot_display.launch.py\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Use the URDF spawner tool:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Install if not already installed\r\nsudo apt install ros-humble-urdf-tutorial\r\n\r\n# Parse and check the URDF\r\nros2 run urdf_parser_py display_urdf /path/to/your/robot.urdf\n"})}),"\n",(0,s.jsx)(e.h3,{id:"useful-urdf-commands",children:"Useful URDF Commands"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"List robot joints:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ros2 param list | grep joint\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Check TF tree:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ros2 run tf2_tools view_frames\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Echo joint states:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ros2 topic echo /joint_states\n"})}),"\n",(0,s.jsx)(e.h3,{id:"common-validation-steps",children:"Common Validation Steps"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Check for proper XML syntax"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Verify all joint parent/child relationships"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Ensure all referenced files exist (meshes, etc.)"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Validate mass and inertia values"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Check for proper coordinate frame definitions"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,s.jsx)(e.h3,{id:"issue-urdf-fails-to-load-or-parse",children:"Issue: URDF fails to load or parse"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Check for proper XML syntax (all tags closed properly)"}),"\n",(0,s.jsx)(e.li,{children:"Verify all referenced files exist"}),"\n",(0,s.jsx)(e.li,{children:"Ensure proper file permissions"}),"\n",(0,s.jsxs)(e.li,{children:["Use ",(0,s.jsx)(e.code,{children:"check_urdf"})," to identify specific issues"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"issue-robot-appears-distorted-or-with-wrong-proportions",children:"Issue: Robot appears distorted or with wrong proportions"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Verify units are consistent (usually meters for length)"}),"\n",(0,s.jsx)(e.li,{children:"Check that geometry dimensions are correct"}),"\n",(0,s.jsx)(e.li,{children:"Ensure origins and rotations are properly defined"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"issue-physics-simulation-is-unstable",children:"Issue: Physics simulation is unstable"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Verify inertial properties are physically realistic"}),"\n",(0,s.jsx)(e.li,{children:"Check mass values are appropriate"}),"\n",(0,s.jsx)(e.li,{children:"Ensure center of mass is correctly positioned"}),"\n",(0,s.jsx)(e.li,{children:"Use proper moment of inertia values"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"issue-joint-limits-not-working-in-simulation",children:"Issue: Joint limits not working in simulation"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Verify joint type matches intended movement"}),"\n",(0,s.jsx)(e.li,{children:"Check that limits are properly defined in URDF"}),"\n",(0,s.jsx)(e.li,{children:"Ensure Gazebo plugins are configured correctly"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"URDF is the standard format for robot descriptions in ROS"}),"\n",(0,s.jsx)(e.li,{children:"Proper URDF structure includes links, joints, and physical properties"}),"\n",(0,s.jsx)(e.li,{children:"Xacro simplifies complex robot models with macros and parameters"}),"\n",(0,s.jsx)(e.li,{children:"Gazebo plugins integrate sensors and actuators with simulation"}),"\n",(0,s.jsx)(e.li,{children:"Validation tools help identify and fix URDF issues"}),"\n",(0,s.jsx)(e.li,{children:"Well-structured URDF is essential for simulation, visualization, and control"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(e.p,{children:"In the next chapter, you'll learn about the NVIDIA Isaac platform, which provides advanced tools for robotics perception, navigation, and AI integration."})]})}function h(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},7074:(n,e,r)=>{r.d(e,{R:()=>l,x:()=>t});var i=r(6540);const s={},o=i.createContext(s);function l(n){const e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),i.createElement(o.Provider,{value:e},n.children)}}}]);