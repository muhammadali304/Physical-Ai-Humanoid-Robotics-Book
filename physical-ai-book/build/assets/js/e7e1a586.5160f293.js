"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[9837],{6157:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"simulation/navigation-testing-environment","title":"Navigation Testing Simulation Environment","description":"Overview","source":"@site/docs/simulation/navigation-testing-environment.md","sourceDirName":"simulation","slug":"/simulation/navigation-testing-environment","permalink":"/docs/simulation/navigation-testing-environment","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/simulation/navigation-testing-environment.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"FPS Validation Process for Physics Simulation","permalink":"/docs/simulation/fps-validation-process"},"next":{"title":"Troubleshooting Guide for Simulation-Specific Issues","permalink":"/docs/simulation/simulation-troubleshooting"}}');var i=r(4848),s=r(7074);const a={},o="Navigation Testing Simulation Environment",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Simulation Environment Design",id:"simulation-environment-design",level:2},{value:"1. Navigation Testing World Features",id:"1-navigation-testing-world-features",level:3},{value:"2. World Configuration File",id:"2-world-configuration-file",level:3},{value:"3. Navigation Testing Launch File",id:"3-navigation-testing-launch-file",level:3},{value:"4. Navigation Test Scenarios",id:"4-navigation-test-scenarios",level:3},{value:"5. Navigation Test Interface Node",id:"5-navigation-test-interface-node",level:3},{value:"Advanced Navigation Testing Features",id:"advanced-navigation-testing-features",level:2},{value:"1. Dynamic Obstacle Simulation",id:"1-dynamic-obstacle-simulation",level:3},{value:"2. Test Environment Analysis Tools",id:"2-test-environment-analysis-tools",level:3},{value:"Testing and Validation",id:"testing-and-validation",level:2},{value:"1. Automated Test Script",id:"1-automated-test-script",level:3},{value:"Best Practices for Navigation Testing",id:"best-practices-for-navigation-testing",level:2},{value:"1. Test Coverage Guidelines",id:"1-test-coverage-guidelines",level:3},{value:"2. Environment Design Principles",id:"2-environment-design-principles",level:3},{value:"3. Performance Metrics",id:"3-performance-metrics",level:3},{value:"Conclusion",id:"conclusion",level:2}];function _(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"navigation-testing-simulation-environment",children:"Navigation Testing Simulation Environment"})}),"\n",(0,i.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(e.p,{children:"This guide provides comprehensive instructions for creating a Gazebo simulation environment specifically designed for navigation testing. The environment includes various obstacle configurations, navigation challenges, and testing scenarios to validate robot navigation capabilities."}),"\n",(0,i.jsx)(e.h2,{id:"simulation-environment-design",children:"Simulation Environment Design"}),"\n",(0,i.jsx)(e.h3,{id:"1-navigation-testing-world-features",children:"1. Navigation Testing World Features"}),"\n",(0,i.jsx)(e.p,{children:"The navigation testing environment should include:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Static Obstacles"}),": Walls, furniture, and fixed obstacles"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Dynamic Obstacles"}),": Moving objects to test obstacle avoidance"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Narrow Passages"}),": Tight spaces to test navigation precision"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Open Areas"}),": Large spaces for path planning validation"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Multiple Levels"}),": Different floor levels connected by ramps/stairs"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Various Surfaces"}),": Different textures for wheel traction testing"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Landmarks"}),": Visual markers for localization testing"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"2-world-configuration-file",children:"2. World Configuration File"}),"\n",(0,i.jsxs)(e.p,{children:["Create a Gazebo world file ",(0,i.jsx)(e.code,{children:"navigation_test_world.sdf"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0" ?>\r\n<sdf version="1.7">\r\n  <world name="navigation_test_world">\r\n    \x3c!-- Include default Gazebo environment --\x3e\r\n    <include>\r\n      <uri>model://ground_plane</uri>\r\n    </include>\r\n\r\n    <include>\r\n      <uri>model://sun</uri>\r\n    </include>\r\n\r\n    \x3c!-- Physics Engine Configuration --\x3e\r\n    <physics name="default_physics" type="ode">\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_factor>1.0</real_time_factor>\r\n      <real_time_update_rate>1000.0</real_time_update_rate>\r\n      <gravity>0 0 -9.8</gravity>\r\n      <ode>\r\n        <solver>\r\n          <type>quick</type>\r\n          <iters>10</iters>\r\n          <sor>1.0</sor>\r\n        </solver>\r\n        <constraints>\r\n          <cfm>0.0</cfm>\r\n          <erp>0.2</erp>\r\n          <contact_max_correcting_vel>100.0</contact_max_correcting_vel>\r\n          <contact_surface_layer>0.001</contact_surface_layer>\r\n        </constraints>\r\n      </ode>\r\n    </physics>\r\n\r\n    \x3c!-- Navigation Test Areas --\x3e\r\n\r\n    \x3c!-- 1. Corridor Test Area --\x3e\r\n    <model name="corridor_area">\r\n      <pose>0 0 0 0 0 0</pose>\r\n      <static>true</static>\r\n      <link name="corridor_walls">\r\n        <collision name="left_wall">\r\n          <geometry>\r\n            <box>\r\n              <size>10 0.2 2</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="left_wall_visual">\r\n          <geometry>\r\n            <box>\r\n              <size>10 0.2 2</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.7 0.7 0.7 1</ambient>\r\n            <diffuse>0.7 0.7 0.7 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>100</mass>\r\n          <inertia>\r\n            <ixx>833.33</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>100.08</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>933.41</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n\r\n      <link name="right_wall">\r\n        <pose>0 3 0 0 0 0</pose>\r\n        <collision name="right_wall_collision">\r\n          <geometry>\r\n            <box>\r\n              <size>10 0.2 2</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="right_wall_visual">\r\n          <geometry>\r\n            <box>\r\n              <size>10 0.2 2</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.7 0.7 0.7 1</ambient>\r\n            <diffuse>0.7 0.7 0.7 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>100</mass>\r\n          <inertia>\r\n            <ixx>833.33</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>100.08</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>933.41</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n\r\n    \x3c!-- 2. Narrow Passage Area --\x3e\r\n    <model name="narrow_passage">\r\n      <pose>8 0 0 0 0 0</pose>\r\n      <static>true</static>\r\n      <link name="left_barrier">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.5 4 1</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.5 4 1</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.8 0.2 0.2 1</ambient>\r\n            <diffuse>0.8 0.2 0.2 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>50</mass>\r\n          <inertia>\r\n            <ixx>66.67</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>10.42</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>77.08</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n\r\n      <link name="right_barrier">\r\n        <pose>0 3.5 0 0 0 0</pose>\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.5 4 1</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.5 4 1</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.8 0.2 0.2 1</ambient>\r\n            <diffuse>0.8 0.2 0.2 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>50</mass>\r\n          <inertia>\r\n            <ixx>66.67</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>10.42</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>77.08</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n\r\n    \x3c!-- 3. Dynamic Obstacle Area --\x3e\r\n    <model name="moving_obstacle">\r\n      <pose>5 5 0 0 0 0</pose>\r\n      <link name="moving_link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <sphere>\r\n              <radius>0.3</radius>\r\n            </sphere>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <sphere>\r\n              <radius>0.3</radius>\r\n            </sphere>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.2 0.2 0.8 1</ambient>\r\n            <diffuse>0.2 0.2 0.8 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>5</mass>\r\n          <inertia>\r\n            <ixx>0.18</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.18</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>0.18</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n      \x3c!-- Add plugin for movement --\x3e\r\n      <plugin name="model_push" filename="libgazebo_ros_p3d.so">\r\n        <always_on>true</always_on>\r\n        <update_rate>10</update_rate>\r\n        <body_name>moving_link</body_name>\r\n        <topic_name>moving_obstacle_pose</topic_name>\r\n        <gaussian_noise>0.0</gaussian_noise>\r\n        <frame_name>map</frame_name>\r\n      </plugin>\r\n    </model>\r\n\r\n    \x3c!-- 4. Furniture Obstacles --\x3e\r\n    <model name="table_1">\r\n      <pose>-5 2 0 0 0 0</pose>\r\n      <static>true</static>\r\n      <link name="table_top">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>1.5 0.8 0.05</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>1.5 0.8 0.05</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.6 0.4 0.2 1</ambient>\r\n            <diffuse>0.6 0.4 0.2 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>10</mass>\r\n          <inertia>\r\n            <ixx>0.817</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>1.325</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>2.142</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n      <link name="leg_1">\r\n        <pose>-0.7 0.35 0.4 0 0 0</pose>\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 0.1 0.8</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 0.1 0.8</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.6 0.4 0.2 1</ambient>\r\n            <diffuse>0.6 0.4 0.2 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>1</mass>\r\n          <inertia>\r\n            <ixx>0.0134</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.0134</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>0.0083</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n      <link name="leg_2">\r\n        <pose>0.7 0.35 0.4 0 0 0</pose>\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 0.1 0.8</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 0.1 0.8</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.6 0.4 0.2 1</ambient>\r\n            <diffuse>0.6 0.4 0.2 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>1</mass>\r\n          <inertia>\r\n            <ixx>0.0134</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.0134</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>0.0083</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n      <link name="leg_3">\r\n        <pose>-0.7 -0.35 0.4 0 0 0</pose>\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 0.1 0.8</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 0.1 0.8</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.6 0.4 0.2 1</ambient>\r\n            <diffuse>0.6 0.4 0.2 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>1</mass>\r\n          <inertia>\r\n            <ixx>0.0134</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.0134</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>0.0083</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n      <link name="leg_4">\r\n        <pose>0.7 -0.35 0.4 0 0 0</pose>\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 0.1 0.8</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 0.1 0.8</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.6 0.4 0.2 1</ambient>\r\n            <diffuse>0.6 0.4 0.2 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>1</mass>\r\n          <inertia>\r\n            <ixx>0.0134</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.0134</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>0.0083</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n      <joint name="joint_1" type="fixed">\r\n        <parent>table_top</parent>\r\n        <child>leg_1</child>\r\n      </joint>\r\n      <joint name="joint_2" type="fixed">\r\n        <parent>table_top</parent>\r\n        <child>leg_2</child>\r\n      </joint>\r\n      <joint name="joint_3" type="fixed">\r\n        <parent>table_top</parent>\r\n        <child>leg_3</child>\r\n      </joint>\r\n      <joint name="joint_4" type="fixed">\r\n        <parent>table_top</parent>\r\n        <child>leg_4</child>\r\n      </joint>\r\n    </model>\r\n\r\n    \x3c!-- 5. Open Area with Landmarks --\x3e\r\n    <model name="landmark_1">\r\n      <pose>10 8 0 0 0 0</pose>\r\n      <static>true</static>\r\n      <link name="landmark_link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <cylinder>\r\n              <radius>0.2</radius>\r\n              <length>1.5</length>\r\n            </cylinder>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <cylinder>\r\n              <radius>0.2</radius>\r\n              <length>1.5</length>\r\n            </cylinder>\r\n          </geometry>\r\n          <material>\r\n            <ambient>1 0 0 1</ambient>\r\n            <diffuse>1 0 0 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>5</mass>\r\n          <inertia>\r\n            <ixx>0.225</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.225</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>0.1</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n\r\n    <model name="landmark_2">\r\n      <pose>12 8 0 0 0 0</pose>\r\n      <static>true</static>\r\n      <link name="landmark_link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <cylinder>\r\n              <radius>0.2</radius>\r\n              <length>1.5</length>\r\n            </cylinder>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <cylinder>\r\n              <radius>0.2</radius>\r\n              <length>1.5</length>\r\n            </cylinder>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0 1 0 1</ambient>\r\n            <diffuse>0 1 0 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>5</mass>\r\n          <inertia>\r\n            <ixx>0.225</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.225</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>0.1</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n\r\n    \x3c!-- 6. Ramp for Multi-level Testing --\x3e\r\n    <model name="ramp">\r\n      <pose>-8 -5 0 0 0 0</pose>\r\n      <static>true</static>\r\n      <link name="ramp_link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>2 1 0.2</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>2 1 0.2</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.5 0.5 0.5 1</ambient>\r\n            <diffuse>0.5 0.5 0.5 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>20</mass>\r\n          <inertia>\r\n            <ixx>1.683</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>6.683</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>8.333</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n      \x3c!-- Rotate the ramp to create an incline --\x3e\r\n      <pose>-8 -5 0 0 0 0.3</pose>\r\n    </model>\r\n\r\n    \x3c!-- 7. Maze Area --\x3e\r\n    <model name="maze_wall_1">\r\n      <pose>-2 -8 0 0 0 0</pose>\r\n      <static>true</static>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.2 3 1</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.2 3 1</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.4 0.4 0.4 1</ambient>\r\n            <diffuse>0.4 0.4 0.4 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>15</mass>\r\n          <inertia>\r\n            <ixx>11.25</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.158</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>11.408</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n\r\n    <model name="maze_wall_2">\r\n      <pose>-1 -6.5 0 0 0 0</pose>\r\n      <static>true</static>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>2 0.2 1</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>2 0.2 1</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.4 0.4 0.4 1</ambient>\r\n            <diffuse>0.4 0.4 0.4 1</diffuse>\r\n            <specular>0.1 0.1 0.1 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>15</mass>\r\n          <inertia>\r\n            <ixx>0.158</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>5.05</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>5.208</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n\r\n    \x3c!-- Lighting --\x3e\r\n    <light name="navigation_test_light" type="spot">\r\n      <pose>0 0 10 0 0 0</pose>\r\n      <diffuse>1 1 1 1</diffuse>\r\n      <specular>0.5 0.5 0.5 1</specular>\r\n      <attenuation>\r\n        <range>20</range>\r\n        <constant>0.9</constant>\r\n        <linear>0.01</linear>\r\n        <quadratic>0.001</quadratic>\r\n      </attenuation>\r\n      <direction>-0.5 -0.1 -0.8</direction>\r\n      <spot>\r\n        <cutoff>40</cutoff>\r\n        <exponent>80</exponent>\r\n      </spot>\r\n    </light>\r\n\r\n    \x3c!-- Scene Settings --\x3e\r\n    <scene>\r\n      <ambient>0.4 0.4 0.4 1</ambient>\r\n      <background>0.7 0.7 0.7 1</background>\r\n      <shadows>true</shadows>\r\n    </scene>\r\n\r\n  </world>\r\n</sdf>\n'})}),"\n",(0,i.jsx)(e.h3,{id:"3-navigation-testing-launch-file",children:"3. Navigation Testing Launch File"}),"\n",(0,i.jsxs)(e.p,{children:["Create a launch file ",(0,i.jsx)(e.code,{children:"navigation_test_launch.py"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"import os\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription, TimerAction\r\nfrom launch.conditions import IfCondition\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\nfrom ament_index_python.packages import get_package_share_directory\r\n\r\n\r\ndef generate_launch_description():\r\n    # Launch configuration variables\r\n    use_sim_time = LaunchConfiguration('use_sim_time', default='true')\r\n    world_file = LaunchConfiguration('world', default=os.path.join(\r\n        get_package_share_directory('your_robot_gazebo'),\r\n        'worlds', 'navigation_test_world.sdf'))\r\n    params_file = LaunchConfiguration('params_file')\r\n    run_rviz = LaunchConfiguration('run_rviz', default='true')\r\n    robot_name = LaunchConfiguration('robot_name', default='test_robot')\r\n    autostart = LaunchConfiguration('autostart', default='true')\r\n\r\n    # Declare launch arguments\r\n    declare_use_sim_time = DeclareLaunchArgument(\r\n        'use_sim_time',\r\n        default_value='true',\r\n        description='Use simulation clock if true')\r\n\r\n    declare_world = DeclareLaunchArgument(\r\n        'world',\r\n        default_value=os.path.join(\r\n            get_package_share_directory('your_robot_gazebo'),\r\n            'worlds', 'navigation_test_world.sdf'),\r\n        description='SDF world file')\r\n\r\n    declare_params_file = DeclareLaunchArgument(\r\n        'params_file',\r\n        default_value=os.path.join(\r\n            get_package_share_directory('your_robot_navigation'),\r\n            'config', 'navigation_test.yaml'),\r\n        description='Full path to the ROS2 parameters file to use for all launched nodes')\r\n\r\n    declare_robot_name = DeclareLaunchArgument(\r\n        'robot_name',\r\n        default_value='test_robot',\r\n        description='Name of the robot')\r\n\r\n    declare_autostart = DeclareLaunchArgument(\r\n        'autostart',\r\n        default_value='true',\r\n        description='Automatically startup the nav2 stack')\r\n\r\n    declare_run_rviz = DeclareLaunchArgument(\r\n        'run_rviz',\r\n        default_value='true',\r\n        description='Whether to start RViz')\r\n\r\n    # Gazebo launch\r\n    gazebo = IncludeLaunchDescription(\r\n        PythonLaunchDescriptionSource(\r\n            os.path.join(\r\n                get_package_share_directory('gazebo_ros'),\r\n                'launch', 'gazebo.launch.py')),\r\n        launch_arguments={\r\n            'world': world_file,\r\n            'verbose': 'false',\r\n            'gui': 'true'\r\n        }.items()\r\n    )\r\n\r\n    # Robot state publisher for the test robot\r\n    robot_state_publisher = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        name='robot_state_publisher',\r\n        output='screen',\r\n        parameters=[{\r\n            'use_sim_time': use_sim_time,\r\n            'robot_description': '<robot name=\"test_robot\"><link name=\"base_link\"/></robot>'\r\n        }]\r\n    )\r\n\r\n    # Spawn the test robot\r\n    spawn_robot = Node(\r\n        package='gazebo_ros',\r\n        executable='spawn_entity.py',\r\n        arguments=[\r\n            '-entity', robot_name,\r\n            '-topic', 'robot_description',\r\n            '-x', '0', '-y', '0', '-z', '0.1',\r\n            '-Y', '0'\r\n        ],\r\n        output='screen'\r\n    )\r\n\r\n    # Navigation2 stack\r\n    navigation2 = IncludeLaunchDescription(\r\n        PythonLaunchDescriptionSource(\r\n            os.path.join(\r\n                get_package_share_directory('nav2_bringup'),\r\n                'launch', 'navigation_launch.py')),\r\n        launch_arguments={\r\n            'use_sim_time': use_sim_time,\r\n            'params_file': params_file,\r\n            'autostart': autostart\r\n        }.items()\r\n    )\r\n\r\n    # SLAM toolbox for mapping (if needed)\r\n    slam_toolbox = Node(\r\n        condition=IfCondition(LaunchConfiguration('slam', default='false')),\r\n        package='slam_toolbox',\r\n        executable='async_slam_toolbox_node',\r\n        name='slam_toolbox',\r\n        parameters=[{\r\n            'use_sim_time': use_sim_time,\r\n            'slam_toolbox_params_file': os.path.join(\r\n                get_package_share_directory('your_robot_navigation'),\r\n                'config', 'slam.yaml')\r\n        }],\r\n        output='screen'\r\n    )\r\n\r\n    # RViz2\r\n    rviz = Node(\r\n        condition=IfCondition(run_rviz),\r\n        package='rviz2',\r\n        executable='rviz2',\r\n        name='rviz2',\r\n        arguments=['-d', os.path.join(\r\n            get_package_share_directory('nav2_bringup'),\r\n            'rviz', 'nav2_default_view.rviz')],\r\n        parameters=[{'use_sim_time': use_sim_time}]\r\n    )\r\n\r\n    # Navigation testing interface\r\n    nav_test_interface = Node(\r\n        package='your_robot_navigation',\r\n        executable='navigation_test_interface',\r\n        name='navigation_test_interface',\r\n        parameters=[{\r\n            'use_sim_time': use_sim_time,\r\n            'test_scenarios': [\r\n                'corridor_navigation',\r\n                'obstacle_avoidance',\r\n                'narrow_passage',\r\n                'dynamic_obstacle'\r\n            ]\r\n        }],\r\n        output='screen'\r\n    )\r\n\r\n    # Create launch description\r\n    ld = LaunchDescription()\r\n\r\n    # Add launch arguments\r\n    ld.add_action(declare_use_sim_time)\r\n    ld.add_action(declare_world)\r\n    ld.add_action(declare_params_file)\r\n    ld.add_action(declare_robot_name)\r\n    ld.add_action(declare_autostart)\r\n    ld.add_action(declare_run_rviz)\r\n\r\n    # Add actions\r\n    ld.add_action(gazebo)\r\n    ld.add_action(robot_state_publisher)\r\n    ld.add_action(spawn_robot)\r\n    ld.add_action(navigation2)\r\n    ld.add_action(slam_toolbox)\r\n    ld.add_action(rviz)\r\n    ld.add_action(nav_test_interface)\r\n\r\n    return ld\n"})}),"\n",(0,i.jsx)(e.h3,{id:"4-navigation-test-scenarios",children:"4. Navigation Test Scenarios"}),"\n",(0,i.jsxs)(e.p,{children:["Create a navigation test scenarios configuration ",(0,i.jsx)(e.code,{children:"navigation_test_scenarios.yaml"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'# Navigation test scenarios configuration\r\nnavigation_test_scenarios:\r\n  corridor_navigation:\r\n    description: "Navigate through a long corridor with walls on both sides"\r\n    start_pose: [0.0, 0.0, 0.0]\r\n    goal_pose: [8.0, 1.5, 0.0]\r\n    success_criteria:\r\n      - "reach_goal_within_tolerance: 0.25"\r\n      - "max_execution_time: 60.0"\r\n      - "no_collisions: true"\r\n    difficulty: "easy"\r\n    tags: ["corridor", "straight", "obstacle_avoidance"]\r\n\r\n  narrow_passage:\r\n    description: "Navigate through a narrow passage between obstacles"\r\n    start_pose: [8.0, 0.0, 0.0]\r\n    goal_pose: [8.0, 3.0, 0.0]\r\n    success_criteria:\r\n      - "reach_goal_within_tolerance: 0.25"\r\n      - "max_execution_time: 120.0"\r\n      - "no_collisions: true"\r\n      - "min_clearance: 0.1"\r\n    difficulty: "medium"\r\n    tags: ["narrow", "precision", "obstacle_avoidance"]\r\n\r\n  obstacle_avoidance:\r\n    description: "Navigate around static furniture obstacles"\r\n    start_pose: [-6.0, 0.0, 0.0]\r\n    goal_pose: [-6.0, 4.0, 0.0]\r\n    success_criteria:\r\n      - "reach_goal_within_tolerance: 0.25"\r\n      - "max_execution_time: 90.0"\r\n      - "no_collisions: true"\r\n    difficulty: "easy"\r\n    tags: ["static_obstacles", "furniture", "path_planning"]\r\n\r\n  dynamic_obstacle:\r\n    description: "Navigate while avoiding a moving obstacle"\r\n    start_pose: [4.0, 4.0, 0.0]\r\n    goal_pose: [6.0, 6.0, 0.0]\r\n    success_criteria:\r\n      - "reach_goal_within_tolerance: 0.25"\r\n      - "max_execution_time: 180.0"\r\n      - "no_collisions: true"\r\n      - "maintain_safe_distance: 0.5"\r\n    difficulty: "hard"\r\n    tags: ["dynamic_obstacles", "reactive_navigation", "local_planning"]\r\n\r\n  landmark_navigation:\r\n    description: "Navigate to specific landmarks in open space"\r\n    start_pose: [9.0, 7.0, 0.0]\r\n    goal_pose: [11.0, 8.0, 0.0]\r\n    success_criteria:\r\n      - "reach_goal_within_tolerance: 0.25"\r\n      - "max_execution_time: 45.0"\r\n      - "no_collisions: true"\r\n    difficulty: "easy"\r\n    tags: ["open_space", "landmarks", "global_planning"]\r\n\r\n  maze_navigation:\r\n    description: "Navigate through a simple maze"\r\n    start_pose: [-3.0, -7.0, 0.0]\r\n    goal_pose: [0.0, -5.0, 0.0]\r\n    success_criteria:\r\n      - "reach_goal_within_tolerance: 0.25"\r\n      - "max_execution_time: 150.0"\r\n      - "no_collisions: true"\r\n    difficulty: "medium"\r\n    tags: ["maze", "path_planning", "decision_making"]\r\n\r\n# Test execution parameters\r\ntest_execution:\r\n  auto_run: false\r\n  random_order: false\r\n  repeat_count: 1\r\n  timeout_per_scenario: 300.0\r\n  pause_between_tests: 5.0\r\n\r\n# Performance metrics to track\r\nperformance_metrics:\r\n  path_length: true\r\n  execution_time: true\r\n  collisions: true\r\n  path_efficiency: true\r\n  success_rate: true\r\n  average_linear_velocity: true\r\n  average_angular_velocity: true\r\n  path_deviation: true\r\n  obstacle_clearance: true\r\n\r\n# Navigation parameters for testing\r\nnavigation_parameters:\r\n  global_planner: "nav2_navfn_planner/NavfnPlanner"\r\n  local_planner: "dwb_core/DWBLocalPlanner"\r\n  controller_frequency: 20.0\r\n  planner_frequency: 1.0\r\n  min_distance_to_obstacles: 0.5\r\n  max_linear_velocity: 0.5\r\n  max_angular_velocity: 1.0\r\n  goal_tolerance: 0.25\r\n  obstacle_avoidance_timeout: 30.0\n'})}),"\n",(0,i.jsx)(e.h3,{id:"5-navigation-test-interface-node",children:"5. Navigation Test Interface Node"}),"\n",(0,i.jsxs)(e.p,{children:["Create a navigation test interface node ",(0,i.jsx)(e.code,{children:"navigation_test_interface.py"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nNavigation Test Interface for Gazebo Simulation\r\n\"\"\"\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import PoseStamped, Point\r\nfrom nav2_msgs.action import NavigateToPose\r\nfrom rclpy.action import ActionClient\r\nfrom std_msgs.msg import String, Bool, Float32\r\nfrom builtin_interfaces.msg import Duration\r\nimport time\r\nimport math\r\nimport random\r\nfrom enum import Enum\r\n\r\n\r\nclass TestStatus(Enum):\r\n    IDLE = 0\r\n    RUNNING = 1\r\n    SUCCESS = 2\r\n    FAILED = 3\r\n    TIMEOUT = 4\r\n\r\n\r\nclass NavigationTestInterface(Node):\r\n    def __init__(self):\r\n        super().__init__('navigation_test_interface')\r\n\r\n        # Parameters\r\n        self.declare_parameter('test_scenarios', [\r\n            'corridor_navigation', 'obstacle_avoidance',\r\n            'narrow_passage', 'dynamic_obstacle'\r\n        ])\r\n        self.declare_parameter('auto_run', False)\r\n        self.declare_parameter('random_order', False)\r\n        self.declare_parameter('repeat_count', 1)\r\n        self.declare_parameter('timeout_per_scenario', 300.0)\r\n\r\n        self.test_scenarios = self.get_parameter('test_scenarios').value\r\n        self.auto_run = self.get_parameter('auto_run').value\r\n        self.random_order = self.get_parameter('random_order').value\r\n        self.repeat_count = self.get_parameter('repeat_count').value\r\n        self.timeout_per_scenario = self.get_parameter('timeout_per_scenario').value\r\n\r\n        # Navigation action client\r\n        self.nav_client = ActionClient(self, NavigateToPose, 'navigate_to_pose')\r\n\r\n        # Publishers\r\n        self.test_status_pub = self.create_publisher(String, '/navigation_test_status', 10)\r\n        self.test_result_pub = self.create_publisher(Bool, '/navigation_test_result', 10)\r\n        self.test_progress_pub = self.create_publisher(Float32, '/navigation_test_progress', 10)\r\n        self.current_scenario_pub = self.create_publisher(String, '/current_test_scenario', 10)\r\n\r\n        # Subscriptions\r\n        self.test_command_sub = self.create_subscription(\r\n            String, '/navigation_test_command', self.test_command_callback, 10)\r\n\r\n        # Internal state\r\n        self.current_test_status = TestStatus.IDLE\r\n        self.current_scenario_index = 0\r\n        self.test_results = []\r\n        self.test_start_time = None\r\n        self.test_timeout_timer = None\r\n\r\n        # Test scenarios definition\r\n        self.scenarios = {\r\n            'corridor_navigation': {\r\n                'start_pose': [0.0, 0.0, 0.0],\r\n                'goal_pose': [8.0, 1.5, 0.0],\r\n                'description': 'Navigate through corridor',\r\n                'success_criteria': ['reach_goal_within_tolerance: 0.25', 'no_collisions: true']\r\n            },\r\n            'narrow_passage': {\r\n                'start_pose': [8.0, 0.0, 0.0],\r\n                'goal_pose': [8.0, 3.0, 0.0],\r\n                'description': 'Navigate through narrow passage',\r\n                'success_criteria': ['reach_goal_within_tolerance: 0.25', 'no_collisions: true']\r\n            },\r\n            'obstacle_avoidance': {\r\n                'start_pose': [-6.0, 0.0, 0.0],\r\n                'goal_pose': [-6.0, 4.0, 0.0],\r\n                'description': 'Navigate around static obstacles',\r\n                'success_criteria': ['reach_goal_within_tolerance: 0.25', 'no_collisions: true']\r\n            },\r\n            'dynamic_obstacle': {\r\n                'start_pose': [4.0, 4.0, 0.0],\r\n                'goal_pose': [6.0, 6.0, 0.0],\r\n                'description': 'Navigate with dynamic obstacle',\r\n                'success_criteria': ['reach_goal_within_tolerance: 0.25', 'no_collisions: true']\r\n            }\r\n        }\r\n\r\n        # Timer for periodic status updates\r\n        self.status_timer = self.create_timer(1.0, self.publish_status)\r\n\r\n        self.get_logger().info(f'Navigation Test Interface initialized with {len(self.test_scenarios)} scenarios')\r\n\r\n        if self.auto_run:\r\n            self.get_logger().info('Auto-run mode enabled, starting tests...')\r\n            self.start_test_sequence()\r\n\r\n    def test_command_callback(self, msg):\r\n        \"\"\"Handle test commands\"\"\"\r\n        command = msg.data.lower()\r\n\r\n        if command == 'start':\r\n            self.start_test_sequence()\r\n        elif command == 'stop':\r\n            self.stop_test_sequence()\r\n        elif command == 'next':\r\n            self.run_next_scenario()\r\n        elif command == 'reset':\r\n            self.reset_tests()\r\n        elif command.startswith('run_scenario:'):\r\n            scenario_name = command.split(':')[1]\r\n            self.run_single_scenario(scenario_name)\r\n\r\n    def start_test_sequence(self):\r\n        \"\"\"Start the complete test sequence\"\"\"\r\n        self.get_logger().info('Starting navigation test sequence')\r\n        self.current_test_status = TestStatus.RUNNING\r\n        self.current_scenario_index = 0\r\n        self.test_results = []\r\n\r\n        if self.random_order:\r\n            random.shuffle(self.test_scenarios)\r\n\r\n        self.run_next_scenario()\r\n\r\n    def run_next_scenario(self):\r\n        \"\"\"Run the next scenario in the sequence\"\"\"\r\n        if self.current_scenario_index >= len(self.test_scenarios):\r\n            self.complete_test_sequence()\r\n            return\r\n\r\n        scenario_name = self.test_scenarios[self.current_scenario_index]\r\n        self.get_logger().info(f'Running scenario: {scenario_name}')\r\n\r\n        # Publish current scenario\r\n        scenario_msg = String()\r\n        scenario_msg.data = scenario_name\r\n        self.current_scenario_pub.publish(scenario_msg)\r\n\r\n        # Send navigation goal for the scenario\r\n        self.send_navigation_goal(scenario_name)\r\n\r\n    def send_navigation_goal(self, scenario_name):\r\n        \"\"\"Send navigation goal for a specific scenario\"\"\"\r\n        if scenario_name not in self.scenarios:\r\n            self.get_logger().error(f'Unknown scenario: {scenario_name}')\r\n            return\r\n\r\n        scenario = self.scenarios[scenario_name]\r\n        goal_pose = scenario['goal_pose']\r\n\r\n        # Create navigation goal\r\n        goal_msg = NavigateToPose.Goal()\r\n        goal_msg.pose.header.frame_id = 'map'\r\n        goal_msg.pose.header.stamp = self.get_clock().now().to_msg()\r\n        goal_msg.pose.pose.position.x = goal_pose[0]\r\n        goal_msg.pose.pose.position.y = goal_pose[1]\r\n        goal_msg.pose.pose.position.z = 0.0\r\n        goal_msg.pose.pose.orientation.w = 1.0  # No rotation\r\n\r\n        # Wait for navigation server\r\n        if not self.nav_client.wait_for_server(timeout_sec=5.0):\r\n            self.get_logger().error('Navigation server not available')\r\n            self.mark_scenario_failed(scenario_name, 'Navigation server unavailable')\r\n            return\r\n\r\n        # Send goal\r\n        self.test_start_time = self.get_clock().now().nanoseconds / 1e9\r\n        self.current_test_status = TestStatus.RUNNING\r\n\r\n        # Set up timeout timer\r\n        self.test_timeout_timer = self.create_timer(\r\n            self.timeout_per_scenario,\r\n            lambda: self.handle_timeout(scenario_name)\r\n        )\r\n\r\n        future = self.nav_client.send_goal_async(goal_msg)\r\n        future.add_done_callback(lambda f: self.goal_response_callback(f, scenario_name))\r\n\r\n    def goal_response_callback(self, future, scenario_name):\r\n        \"\"\"Handle navigation goal response\"\"\"\r\n        goal_handle = future.result()\r\n        if not goal_handle.accepted:\r\n            self.get_logger().error(f'Goal for {scenario_name} was rejected')\r\n            self.mark_scenario_failed(scenario_name, 'Goal rejected')\r\n            return\r\n\r\n        # Wait for result\r\n        result_future = goal_handle.get_result_async()\r\n        result_future.add_done_callback(lambda f: self.result_callback(f, scenario_name))\r\n\r\n    def result_callback(self, future, scenario_name):\r\n        \"\"\"Handle navigation result\"\"\"\r\n        if self.test_timeout_timer is not None:\r\n            self.test_timeout_timer.cancel()\r\n            self.test_timeout_timer = None\r\n\r\n        result = future.result().result\r\n        if result is not None:\r\n            # Check if navigation was successful\r\n            if result.error_code == 0:  # SUCCESS\r\n                self.mark_scenario_success(scenario_name)\r\n            else:\r\n                self.mark_scenario_failed(scenario_name, f'Navigation failed with error code: {result.error_code}')\r\n        else:\r\n            self.mark_scenario_failed(scenario_name, 'No result received')\r\n\r\n    def handle_timeout(self, scenario_name):\r\n        \"\"\"Handle test timeout\"\"\"\r\n        self.get_logger().warn(f'Test scenario {scenario_name} timed out')\r\n        self.mark_scenario_failed(scenario_name, 'Test timed out')\r\n\r\n    def mark_scenario_success(self, scenario_name):\r\n        \"\"\"Mark a scenario as successful\"\"\"\r\n        self.get_logger().info(f'Scenario {scenario_name} completed successfully')\r\n        self.current_test_status = TestStatus.SUCCESS\r\n\r\n        # Record result\r\n        result = {\r\n            'scenario': scenario_name,\r\n            'status': 'SUCCESS',\r\n            'execution_time': self.get_clock().now().nanoseconds / 1e9 - self.test_start_time,\r\n            'timestamp': self.get_clock().now().nanoseconds / 1e9\r\n        }\r\n        self.test_results.append(result)\r\n\r\n        # Publish result\r\n        result_msg = Bool()\r\n        result_msg.data = True\r\n        self.test_result_pub.publish(result_msg)\r\n\r\n        # Move to next scenario\r\n        self.current_scenario_index += 1\r\n        self.run_next_scenario()\r\n\r\n    def mark_scenario_failed(self, scenario_name, reason):\r\n        \"\"\"Mark a scenario as failed\"\"\"\r\n        self.get_logger().error(f'Scenario {scenario_name} failed: {reason}')\r\n        self.current_test_status = TestStatus.FAILED\r\n\r\n        # Record result\r\n        result = {\r\n            'scenario': scenario_name,\r\n            'status': 'FAILED',\r\n            'reason': reason,\r\n            'execution_time': self.get_clock().now().nanoseconds / 1e9 - self.test_start_time,\r\n            'timestamp': self.get_clock().now().nanoseconds / 1e9\r\n        }\r\n        self.test_results.append(result)\r\n\r\n        # Publish result\r\n        result_msg = Bool()\r\n        result_msg.data = False\r\n        self.test_result_pub.publish(result_msg)\r\n\r\n        # Move to next scenario\r\n        self.current_scenario_index += 1\r\n        self.run_next_scenario()\r\n\r\n    def complete_test_sequence(self):\r\n        \"\"\"Complete the test sequence and report results\"\"\"\r\n        self.get_logger().info('Navigation test sequence completed')\r\n        self.current_test_status = TestStatus.IDLE\r\n\r\n        # Calculate statistics\r\n        total_tests = len(self.test_results)\r\n        successful_tests = len([r for r in self.test_results if r['status'] == 'SUCCESS'])\r\n        success_rate = successful_tests / total_tests if total_tests > 0 else 0\r\n\r\n        self.get_logger().info(f'Test results: {successful_tests}/{total_tests} successful ({success_rate:.2%})')\r\n\r\n        # Publish final status\r\n        status_msg = String()\r\n        status_msg.data = f'TEST_COMPLETE: {successful_tests}/{total_tests} ({success_rate:.2%})'\r\n        self.test_status_pub.publish(status_msg)\r\n\r\n    def stop_test_sequence(self):\r\n        \"\"\"Stop the current test sequence\"\"\"\r\n        self.get_logger().info('Stopping navigation test sequence')\r\n        self.current_test_status = TestStatus.IDLE\r\n        if self.test_timeout_timer is not None:\r\n            self.test_timeout_timer.cancel()\r\n            self.test_timeout_timer = None\r\n\r\n    def reset_tests(self):\r\n        \"\"\"Reset all test results\"\"\"\r\n        self.get_logger().info('Resetting navigation tests')\r\n        self.current_test_status = TestStatus.IDLE\r\n        self.current_scenario_index = 0\r\n        self.test_results = []\r\n        if self.test_timeout_timer is not None:\r\n            self.test_timeout_timer.cancel()\r\n            self.test_timeout_timer = None\r\n\r\n    def run_single_scenario(self, scenario_name):\r\n        \"\"\"Run a single specific scenario\"\"\"\r\n        if scenario_name in self.scenarios:\r\n            self.get_logger().info(f'Running single scenario: {scenario_name}')\r\n            self.current_test_status = TestStatus.RUNNING\r\n            self.send_navigation_goal(scenario_name)\r\n        else:\r\n            self.get_logger().error(f'Unknown scenario: {scenario_name}')\r\n\r\n    def publish_status(self):\r\n        \"\"\"Publish current test status\"\"\"\r\n        status_msg = String()\r\n        status_msg.data = self.current_test_status.name\r\n        self.test_status_pub.publish(status_msg)\r\n\r\n        # Publish progress\r\n        if len(self.test_scenarios) > 0:\r\n            progress = Float32()\r\n            progress.data = min(1.0, self.current_scenario_index / len(self.test_scenarios))\r\n            self.test_progress_pub.publish(progress)\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    test_interface = NavigationTestInterface()\r\n\r\n    try:\r\n        rclpy.spin(test_interface)\r\n    except KeyboardInterrupt:\r\n        test_interface.get_logger().info('Navigation test interface stopped by user')\r\n    finally:\r\n        test_interface.destroy_node()\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(e.h2,{id:"advanced-navigation-testing-features",children:"Advanced Navigation Testing Features"}),"\n",(0,i.jsx)(e.h3,{id:"1-dynamic-obstacle-simulation",children:"1. Dynamic Obstacle Simulation"}),"\n",(0,i.jsx)(e.p,{children:"Create a dynamic obstacle node for testing:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nDynamic Obstacle for Navigation Testing\r\n\"\"\"\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import Twist, Pose\r\nfrom gazebo_msgs.srv import SetEntityState\r\nfrom gazebo_msgs.msg import ModelState\r\nimport math\r\nimport time\r\n\r\n\r\nclass DynamicObstacle(Node):\r\n    def __init__(self):\r\n        super().__init__('dynamic_obstacle')\r\n\r\n        # Parameters\r\n        self.declare_parameter('obstacle_name', 'moving_obstacle')\r\n        self.declare_parameter('movement_pattern', 'circular')  # circular, linear, random\r\n        self.declare_parameter('speed', 0.2)\r\n        self.declare_parameter('radius', 1.0)\r\n\r\n        self.obstacle_name = self.get_parameter('obstacle_name').value\r\n        self.movement_pattern = self.get_parameter('movement_pattern').value\r\n        self.speed = self.get_parameter('speed').value\r\n        self.radius = self.get_parameter('radius').value\r\n\r\n        # Gazebo service client\r\n        self.set_state_client = self.create_client(\r\n            SetEntityState, '/gazebo/set_entity_state')\r\n\r\n        # Wait for service\r\n        while not self.set_state_client.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info('Gazebo set_entity_state service not available, waiting...')\r\n\r\n        # Timer for periodic movement\r\n        self.movement_timer = self.create_timer(0.1, self.move_obstacle)\r\n\r\n        # Internal state\r\n        self.time_offset = time.time()\r\n        self.start_position = [5.0, 5.0, 0.0]  # Starting position\r\n\r\n        self.get_logger().info(f'Dynamic obstacle initialized with pattern: {self.movement_pattern}')\r\n\r\n    def move_obstacle(self):\r\n        \"\"\"Move the obstacle according to the selected pattern\"\"\"\r\n        current_time = time.time() - self.time_offset\r\n\r\n        if self.movement_pattern == 'circular':\r\n            x = self.start_position[0] + self.radius * math.cos(current_time * self.speed)\r\n            y = self.start_position[1] + self.radius * math.sin(current_time * self.speed)\r\n        elif self.movement_pattern == 'linear':\r\n            x = self.start_position[0] + math.sin(current_time * self.speed) * self.radius\r\n            y = self.start_position[1]\r\n        else:  # random pattern\r\n            x = self.start_position[0] + math.sin(current_time * self.speed) * self.radius\r\n            y = self.start_position[1] + math.cos(current_time * self.speed * 0.7) * self.radius\r\n\r\n        # Set new position\r\n        self.set_obstacle_position(x, y, self.start_position[2])\r\n\r\n    def set_obstacle_position(self, x, y, z):\r\n        \"\"\"Set the obstacle position in Gazebo\"\"\"\r\n        req = SetEntityState.Request()\r\n        req.state.name = self.obstacle_name\r\n        req.state.pose.position.x = x\r\n        req.state.pose.position.y = y\r\n        req.state.pose.position.z = z\r\n        req.state.pose.orientation.w = 1.0  # No rotation\r\n        req.state.twist.linear.x = 0.0\r\n        req.state.twist.linear.y = 0.0\r\n        req.state.twist.linear.z = 0.0\r\n        req.state.twist.angular.x = 0.0\r\n        req.state.twist.angular.y = 0.0\r\n        req.state.twist.angular.z = 0.0\r\n\r\n        future = self.set_state_client.call_async(req)\r\n        # We could add a callback to handle the response if needed\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    obstacle = DynamicObstacle()\r\n\r\n    try:\r\n        rclpy.spin(obstacle)\r\n    except KeyboardInterrupt:\r\n        obstacle.get_logger().info('Dynamic obstacle stopped by user')\r\n    finally:\r\n        obstacle.destroy_node()\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(e.h3,{id:"2-test-environment-analysis-tools",children:"2. Test Environment Analysis Tools"}),"\n",(0,i.jsx)(e.p,{children:"Create a test environment analysis node:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\r\n"""\r\nNavigation Test Environment Analysis\r\n"""\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom nav_msgs.msg import Path, OccupancyGrid\r\nfrom geometry_msgs.msg import PoseStamped, Point\r\nfrom visualization_msgs.msg import Marker, MarkerArray\r\nfrom std_msgs.msg import ColorRGBA\r\nimport numpy as np\r\n\r\n\r\nclass NavigationTestAnalyzer(Node):\r\n    def __init__(self):\r\n        super().__init__(\'navigation_test_analyzer\')\r\n\r\n        # Parameters\r\n        self.declare_parameter(\'analysis_frequency\', 10.0)\r\n        self.declare_parameter(\'path_topic\', \'/plan\')\r\n        self.declare_parameter(\'costmap_topic\', \'/global_costmap/costmap\')\r\n\r\n        self.analysis_freq = self.get_parameter(\'analysis_frequency\').value\r\n        path_topic = self.get_parameter(\'path_topic\').value\r\n        costmap_topic = self.get_parameter(\'costmap_topic\').value\r\n\r\n        # Subscriptions\r\n        self.path_sub = self.create_subscription(\r\n            Path, path_topic, self.path_callback, 10)\r\n        self.costmap_sub = self.create_subscription(\r\n            OccupancyGrid, costmap_topic, self.costmap_callback, 10)\r\n\r\n        # Publishers\r\n        self.analysis_pub = self.create_publisher(\r\n            MarkerArray, \'/navigation_analysis_markers\', 10)\r\n        self.metrics_pub = self.create_publisher(\r\n            Marker, \'/navigation_metrics\', 10)\r\n\r\n        # Internal state\r\n        self.current_path = None\r\n        self.current_costmap = None\r\n        self.path_length = 0.0\r\n        self.collision_risk = 0.0\r\n\r\n        # Timer for analysis\r\n        self.analysis_timer = self.create_timer(1.0/self.analysis_freq, self.analyze_path)\r\n\r\n        self.get_logger().info(\'Navigation Test Analyzer initialized\')\r\n\r\n    def path_callback(self, msg):\r\n        """Process path data"""\r\n        self.current_path = msg\r\n        self.calculate_path_metrics()\r\n\r\n    def costmap_callback(self, msg):\r\n        """Process costmap data"""\r\n        self.current_costmap = msg\r\n\r\n    def calculate_path_metrics(self):\r\n        """Calculate path metrics"""\r\n        if not self.current_path or len(self.current_path.poses) < 2:\r\n            return\r\n\r\n        # Calculate path length\r\n        self.path_length = 0.0\r\n        for i in range(1, len(self.current_path.poses)):\r\n            p1 = self.current_path.poses[i-1].pose.position\r\n            p2 = self.current_path.poses[i].pose.position\r\n            dist = np.sqrt((p2.x - p1.x)**2 + (p2.y - p1.y)**2)\r\n            self.path_length += dist\r\n\r\n    def analyze_path(self):\r\n        """Analyze the current path for navigation metrics"""\r\n        if not self.current_path:\r\n            return\r\n\r\n        # Calculate collision risk based on proximity to obstacles in costmap\r\n        if self.current_costmap:\r\n            self.collision_risk = self.calculate_collision_risk()\r\n\r\n        # Create visualization markers\r\n        markers = self.create_analysis_markers()\r\n\r\n        # Publish analysis results\r\n        self.analysis_pub.publish(markers)\r\n\r\n    def calculate_collision_risk(self):\r\n        """Calculate collision risk based on path proximity to obstacles"""\r\n        if not self.current_path or not self.current_costmap:\r\n            return 0.0\r\n\r\n        risk_score = 0.0\r\n        risk_points = 0\r\n\r\n        for pose in self.current_path.poses:\r\n            # Convert world coordinates to costmap indices\r\n            x = pose.pose.position.x\r\n            y = pose.pose.position.y\r\n\r\n            # Calculate costmap index\r\n            idx_x = int((x - self.current_costmap.info.origin.position.x) / self.current_costmap.info.resolution)\r\n            idx_y = int((y - self.current_costmap.info.origin.position.y) / self.current_costmap.info.resolution)\r\n\r\n            if (0 <= idx_x < self.current_costmap.info.width and\r\n                0 <= idx_y < self.current_costmap.info.height):\r\n\r\n                idx = idx_y * self.current_costmap.info.width + idx_x\r\n                if idx < len(self.current_costmap.data):\r\n                    cost = self.current_costmap.data[idx]\r\n                    if cost > 50:  # High cost area\r\n                        risk_score += cost\r\n                        risk_points += 1\r\n\r\n        return risk_score / risk_points if risk_points > 0 else 0.0\r\n\r\n    def create_analysis_markers(self):\r\n        """Create visualization markers for analysis"""\r\n        markers = MarkerArray()\r\n\r\n        # Path length marker\r\n        length_marker = Marker()\r\n        length_marker.header.frame_id = "map"\r\n        length_marker.header.stamp = self.get_clock().now().to_msg()\r\n        length_marker.ns = "navigation_analysis"\r\n        length_marker.id = 0\r\n        length_marker.type = Marker.TEXT_VIEW_FACING\r\n        length_marker.action = Marker.ADD\r\n        length_marker.pose.position.x = 0.0\r\n        length_marker.pose.position.y = 0.0\r\n        length_marker.pose.position.z = 1.0\r\n        length_marker.pose.orientation.w = 1.0\r\n        length_marker.scale.z = 0.2\r\n        length_marker.color.r = 1.0\r\n        length_marker.color.g = 1.0\r\n        length_marker.color.b = 1.0\r\n        length_marker.color.a = 1.0\r\n        length_marker.text = f"Path Length: {self.path_length:.2f}m"\r\n        markers.markers.append(length_marker)\r\n\r\n        # Collision risk marker\r\n        risk_marker = Marker()\r\n        risk_marker.header.frame_id = "map"\r\n        risk_marker.header.stamp = self.get_clock().now().to_msg()\r\n        risk_marker.ns = "navigation_analysis"\r\n        risk_marker.id = 1\r\n        risk_marker.type = Marker.TEXT_VIEW_FACING\r\n        risk_marker.action = Marker.ADD\r\n        risk_marker.pose.position.x = 0.0\r\n        risk_marker.pose.position.y = -0.3\r\n        risk_marker.pose.position.z = 1.0\r\n        risk_marker.pose.orientation.w = 1.0\r\n        risk_marker.scale.z = 0.2\r\n        risk_marker.color.r = 1.0 if self.collision_risk > 100 else 0.0\r\n        risk_marker.color.g = 1.0 if self.collision_risk <= 100 else 0.0\r\n        risk_marker.color.b = 0.0\r\n        risk_marker.color.a = 1.0\r\n        risk_marker.text = f"Collision Risk: {self.collision_risk:.2f}"\r\n        markers.markers.append(risk_marker)\r\n\r\n        return markers\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    analyzer = NavigationTestAnalyzer()\r\n\r\n    try:\r\n        rclpy.spin(analyzer)\r\n    except KeyboardInterrupt:\r\n        analyzer.get_logger().info(\'Navigation test analyzer stopped by user\')\r\n    finally:\r\n        analyzer.destroy_node()\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,i.jsx)(e.h2,{id:"testing-and-validation",children:"Testing and Validation"}),"\n",(0,i.jsx)(e.h3,{id:"1-automated-test-script",children:"1. Automated Test Script"}),"\n",(0,i.jsxs)(e.p,{children:["Create an automated test script ",(0,i.jsx)(e.code,{children:"run_navigation_tests.py"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nAutomated Navigation Testing Script\r\n\"\"\"\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\nfrom geometry_msgs.msg import PoseStamped\r\nfrom nav2_msgs.action import NavigateToPose\r\nfrom rclpy.action import ActionClient\r\nimport time\r\nimport csv\r\nimport os\r\n\r\n\r\nclass NavigationTestRunner(Node):\r\n    def __init__(self):\r\n        super().__init__('navigation_test_runner')\r\n\r\n        # Publishers\r\n        self.test_command_pub = self.create_publisher(String, '/navigation_test_command', 10)\r\n\r\n        # Test parameters\r\n        self.test_scenarios = [\r\n            {'name': 'corridor_navigation', 'goal': [8.0, 1.5, 0.0]},\r\n            {'name': 'narrow_passage', 'goal': [8.0, 3.0, 0.0]},\r\n            {'name': 'obstacle_avoidance', 'goal': [-6.0, 4.0, 0.0]},\r\n            {'name': 'dynamic_obstacle', 'goal': [6.0, 6.0, 0.0]}\r\n        ]\r\n\r\n        # Results storage\r\n        self.results = []\r\n        self.results_file = 'navigation_test_results.csv'\r\n\r\n        self.get_logger().info('Navigation Test Runner initialized')\r\n\r\n    def run_comprehensive_test(self):\r\n        \"\"\"Run comprehensive navigation tests\"\"\"\r\n        self.get_logger().info('Starting comprehensive navigation tests...')\r\n\r\n        for scenario in self.test_scenarios:\r\n            self.get_logger().info(f'Running scenario: {scenario[\"name\"]}')\r\n\r\n            # Send test command\r\n            cmd_msg = String()\r\n            cmd_msg.data = f'run_scenario:{scenario[\"name\"]}'\r\n            self.test_command_pub.publish(cmd_msg)\r\n\r\n            # Wait for test to complete (in a real scenario, we'd monitor status)\r\n            time.sleep(5.0)  # Wait for navigation to complete\r\n\r\n            # Record result (in a real test, we'd get actual results)\r\n            result = {\r\n                'scenario': scenario['name'],\r\n                'start_time': time.time(),\r\n                'end_time': time.time(),\r\n                'execution_time': 0.0,\r\n                'success': True,\r\n                'path_length': 0.0,\r\n                'collisions': 0\r\n            }\r\n            self.results.append(result)\r\n\r\n        # Save results\r\n        self.save_results()\r\n        self.get_logger().info('Navigation tests completed')\r\n\r\n    def save_results(self):\r\n        \"\"\"Save test results to CSV file\"\"\"\r\n        with open(self.results_file, 'w', newline='') as csvfile:\r\n            fieldnames = ['scenario', 'start_time', 'end_time', 'execution_time',\r\n                         'success', 'path_length', 'collisions']\r\n            writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\r\n\r\n            writer.writeheader()\r\n            for result in self.results:\r\n                writer.writerow(result)\r\n\r\n        self.get_logger().info(f'Test results saved to {self.results_file}')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    test_runner = NavigationTestRunner()\r\n\r\n    # Run tests\r\n    test_runner.run_comprehensive_test()\r\n\r\n    test_runner.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(e.h2,{id:"best-practices-for-navigation-testing",children:"Best Practices for Navigation Testing"}),"\n",(0,i.jsx)(e.h3,{id:"1-test-coverage-guidelines",children:"1. Test Coverage Guidelines"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Functional Tests"}),": Test basic navigation capabilities (path planning, execution, obstacle avoidance)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Performance Tests"}),": Measure execution time, path efficiency, and resource usage"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Stress Tests"}),": Test with maximum obstacle density and challenging scenarios"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Edge Case Tests"}),": Test boundary conditions and unusual scenarios"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Regression Tests"}),": Ensure new changes don't break existing functionality"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"2-environment-design-principles",children:"2. Environment Design Principles"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Graduated Complexity"}),": Start with simple scenarios and increase complexity"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Realistic Obstacles"}),": Use obstacles that represent real-world scenarios"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Measurable Outcomes"}),": Design tests with clear success/failure criteria"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Reproducible Results"}),": Ensure tests can be run multiple times with consistent results"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Safety Considerations"}),": Include safety checks and emergency stop capabilities"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"3-performance-metrics",children:"3. Performance Metrics"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Success Rate"}),": Percentage of successful navigation attempts"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Execution Time"}),": Time to reach goal from start"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Path Efficiency"}),": Ratio of actual path length to optimal path length"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Collision Rate"}),": Number of collisions per navigation attempt"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Recovery Time"}),": Time to recover from navigation failures"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Resource Usage"}),": CPU, memory, and power consumption"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(e.p,{children:"This comprehensive guide provides all the necessary components to create a robust navigation testing environment in Gazebo. The environment includes various test scenarios, dynamic obstacles, and analysis tools to thoroughly validate robot navigation capabilities. The modular design allows for easy customization and extension based on specific testing requirements. Regular testing with this environment will help ensure reliable and safe robot navigation in real-world applications."})]})}function m(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(_,{...n})}):_(n)}},7074:(n,e,r)=>{r.d(e,{R:()=>a,x:()=>o});var t=r(6540);const i={},s=t.createContext(i);function a(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);