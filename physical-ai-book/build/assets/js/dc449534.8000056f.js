"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[8463],{7074:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var i=s(6540);const r={},o=i.createContext(r);function l(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(o.Provider,{value:n},e.children)}},9569:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"simulation/simulation-troubleshooting","title":"Troubleshooting Guide for Simulation-Specific Issues","description":"Overview","source":"@site/docs/simulation/simulation-troubleshooting.md","sourceDirName":"simulation","slug":"/simulation/simulation-troubleshooting","permalink":"/docs/simulation/simulation-troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/simulation/simulation-troubleshooting.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Navigation Testing Simulation Environment","permalink":"/docs/simulation/navigation-testing-environment"},"next":{"title":"Unity Integration for Robotics Simulation","permalink":"/docs/simulation/unity-integration"}}');var r=s(4848),o=s(7074);const l={},t="Troubleshooting Guide for Simulation-Specific Issues",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Common Simulation Issues and Solutions",id:"common-simulation-issues-and-solutions",level:2},{value:"1. Gazebo Won&#39;t Start or Crashes",id:"1-gazebo-wont-start-or-crashes",level:3},{value:"Issue: Gazebo fails to launch",id:"issue-gazebo-fails-to-launch",level:4},{value:"Issue: Gazebo window doesn&#39;t appear",id:"issue-gazebo-window-doesnt-appear",level:4},{value:"2. Robot Model Issues",id:"2-robot-model-issues",level:3},{value:"Issue: Robot falls through the ground",id:"issue-robot-falls-through-the-ground",level:4},{value:"Issue: Robot shakes or vibrates",id:"issue-robot-shakes-or-vibrates",level:4},{value:"Issue: Robot doesn&#39;t respond to commands",id:"issue-robot-doesnt-respond-to-commands",level:4},{value:"3. Sensor Issues",id:"3-sensor-issues",level:3},{value:"Issue: LIDAR returns all zeros or invalid values",id:"issue-lidar-returns-all-zeros-or-invalid-values",level:4},{value:"Issue: Camera image is black or distorted",id:"issue-camera-image-is-black-or-distorted",level:4},{value:"Issue: IMU readings are unstable or incorrect",id:"issue-imu-readings-are-unstable-or-incorrect",level:4},{value:"4. Physics Performance Issues",id:"4-physics-performance-issues",level:3},{value:"Issue: Low FPS (under 30)",id:"issue-low-fps-under-30",level:4},{value:"Issue: Unstable physics simulation",id:"issue-unstable-physics-simulation",level:4},{value:"5. Communication Issues",id:"5-communication-issues",level:3},{value:"Issue: Topics not connecting between Gazebo and ROS",id:"issue-topics-not-connecting-between-gazebo-and-ros",level:4},{value:"Issue: TF tree issues",id:"issue-tf-tree-issues",level:4},{value:"Diagnostic Tools",id:"diagnostic-tools",level:2},{value:"1. Gazebo Built-in Tools",id:"1-gazebo-built-in-tools",level:3},{value:"2. ROS 2 Diagnostic Commands",id:"2-ros-2-diagnostic-commands",level:3},{value:"3. Performance Monitoring",id:"3-performance-monitoring",level:3},{value:"Debugging Strategies",id:"debugging-strategies",level:2},{value:"1. Isolation Method",id:"1-isolation-method",level:3},{value:"2. Logging and Monitoring",id:"2-logging-and-monitoring",level:3},{value:"3. Configuration Testing",id:"3-configuration-testing",level:3},{value:"Common Configuration Issues",id:"common-configuration-issues",level:2},{value:"1. URDF/Xacro Issues",id:"1-urdfxacro-issues",level:3},{value:"2. Gazebo Plugin Issues",id:"2-gazebo-plugin-issues",level:3},{value:"3. Environment Issues",id:"3-environment-issues",level:3},{value:"Prevention Best Practices",id:"prevention-best-practices",level:2},{value:"1. Model Design",id:"1-model-design",level:3},{value:"2. Physics Configuration",id:"2-physics-configuration",level:3},{value:"3. Sensor Configuration",id:"3-sensor-configuration",level:3},{value:"Advanced Troubleshooting",id:"advanced-troubleshooting",level:2},{value:"1. Gazebo Server Debugging",id:"1-gazebo-server-debugging",level:3},{value:"2. Physics Engine Debugging",id:"2-physics-engine-debugging",level:3},{value:"3. Custom Diagnostic Scripts",id:"3-custom-diagnostic-scripts",level:3},{value:"Quick Reference Checklist",id:"quick-reference-checklist",level:2},{value:"Before Launching Simulation",id:"before-launching-simulation",level:3},{value:"If Simulation Runs Slowly",id:"if-simulation-runs-slowly",level:3},{value:"If Robot Behaves Unexpectedly",id:"if-robot-behaves-unexpectedly",level:3},{value:"If Sensors Don&#39;t Work",id:"if-sensors-dont-work",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"troubleshooting-guide-for-simulation-specific-issues",children:"Troubleshooting Guide for Simulation-Specific Issues"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This guide provides solutions for common issues encountered when working with Gazebo simulation, robot models, sensors, and physics. Use this guide to diagnose and resolve simulation-specific problems."}),"\n",(0,r.jsx)(n.h2,{id:"common-simulation-issues-and-solutions",children:"Common Simulation Issues and Solutions"}),"\n",(0,r.jsx)(n.h3,{id:"1-gazebo-wont-start-or-crashes",children:"1. Gazebo Won't Start or Crashes"}),"\n",(0,r.jsx)(n.h4,{id:"issue-gazebo-fails-to-launch",children:"Issue: Gazebo fails to launch"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Gazebo crashes immediately or fails to start\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check for hardware acceleration:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check if hardware acceleration is available\r\nglxinfo | grep -i "direct rendering"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Try software rendering:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export LIBGL_ALWAYS_SOFTWARE=1\r\ngzserver your_world.world\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Check for missing dependencies:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update && sudo apt install nvidia-prime nvidia-driver-XXX\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"issue-gazebo-window-doesnt-appear",children:"Issue: Gazebo window doesn't appear"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Gazebo server starts but GUI doesn't show\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Launch GUI separately:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gzclient\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Check display settings:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"echo $DISPLAY\r\nexport DISPLAY=:0\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-robot-model-issues",children:"2. Robot Model Issues"}),"\n",(0,r.jsx)(n.h4,{id:"issue-robot-falls-through-the-ground",children:"Issue: Robot falls through the ground"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Robot model falls through floor or other static objects\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check mass and inertia values in URDF:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<inertial>\r\n  <mass value="5.0"/>\r\n  <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.3"/>\r\n</inertial>\n'})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Verify collision geometries are properly defined"}),"\n",(0,r.jsx)(n.li,{children:"Check physics engine parameters in world file"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"issue-robot-shakes-or-vibrates",children:"Issue: Robot shakes or vibrates"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Robot model oscillates or shakes when static\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Adjust ERP (Error Reduction Parameter) and CFM (Constraint Force Mixing):","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<physics name="default" type="ode">\r\n  <ode>\r\n    <solver>\r\n      <type>quick</type>\r\n      <iters>10</iters>\r\n    </solver>\r\n    <constraints>\r\n      <cfm>0.000001</cfm>\r\n      <erp>0.2</erp>\r\n    </constraints>\r\n  </ode>\r\n</physics>\n'})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Increase solver iterations"}),"\n",(0,r.jsx)(n.li,{children:"Check for high mass ratios between connected links"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"issue-robot-doesnt-respond-to-commands",children:"Issue: Robot doesn't respond to commands"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Robot ignores velocity or position commands\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify joint types match controller expectations (continuous vs. revolute)"}),"\n",(0,r.jsxs)(n.li,{children:["Check plugin configuration in URDF:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<gazebo>\r\n  <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">\r\n    <left_joint>left_wheel_joint</left_joint>\r\n    <right_joint>right_wheel_joint</right_joint>\r\n    \x3c!-- Check that joint names match URDF --\x3e\r\n  </plugin>\r\n</gazebo>\n'})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Verify topic names match between controller and plugin"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-sensor-issues",children:"3. Sensor Issues"}),"\n",(0,r.jsx)(n.h4,{id:"issue-lidar-returns-all-zeros-or-invalid-values",children:"Issue: LIDAR returns all zeros or invalid values"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": ",(0,r.jsx)(n.code,{children:"/scan"})," topic contains all zeros, inf, or NaN values\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check sensor configuration in URDF:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<gazebo reference="lidar_link">\r\n  <sensor type="ray" name="lidar_sensor">\r\n    <ray>\r\n      <scan>\r\n        <horizontal>\r\n          <samples>360</samples>\r\n          <resolution>1</resolution>\r\n          <min_angle>-3.14159</min_angle>\r\n          <max_angle>3.14159</max_angle>\r\n        </horizontal>\r\n      </scan>\r\n      <range>\r\n        <min>0.1</min>\r\n        <max>10.0</max>\r\n        <resolution>0.01</resolution>\r\n      </range>\r\n    </ray>\r\n  </sensor>\r\n</gazebo>\n'})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Verify the sensor link is properly positioned in the robot"}),"\n",(0,r.jsx)(n.li,{children:"Check for collisions between sensor and robot body"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"issue-camera-image-is-black-or-distorted",children:"Issue: Camera image is black or distorted"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Camera topic shows black image or visual artifacts\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check camera configuration:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<gazebo reference="camera_link">\r\n  <sensor type="camera" name="camera_sensor">\r\n    <camera name="head_camera">\r\n      <horizontal_fov>1.3962634</horizontal_fov>\r\n      <image>\r\n        <width>640</width>\r\n        <height>480</height>\r\n        <format>R8G8B8</format>\r\n      </image>\r\n      <clip>\r\n        <near>0.05</near>\r\n        <far>3</far>\r\n      </clip>\r\n    </camera>\r\n  </sensor>\r\n</gazebo>\n'})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Verify camera link orientation and position"}),"\n",(0,r.jsx)(n.li,{children:"Check lighting in the environment"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"issue-imu-readings-are-unstable-or-incorrect",children:"Issue: IMU readings are unstable or incorrect"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": IMU topic shows erratic values or incorrect gravity\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check IMU configuration:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<gazebo reference="imu_link">\r\n  <sensor type="imu" name="imu_sensor">\r\n    <always_on>true</always_on>\r\n    <update_rate>100</update_rate>\r\n    <imu>\r\n      <angular_velocity>\r\n        <x>\r\n          <noise type="gaussian">\r\n            <mean>0.0</mean>\r\n            <stddev>2e-4</stddev>\r\n          </noise>\r\n        </x>\r\n        \x3c!-- Similar for y and z axes --\x3e\r\n      </angular_velocity>\r\n      <linear_acceleration>\r\n        <x>\r\n          <noise type="gaussian">\r\n            <mean>0.0</mean>\r\n            <stddev>1.7e-2</stddev>\r\n          </noise>\r\n        </x>\r\n        \x3c!-- Similar for y and z axes --\x3e\r\n      </linear_acceleration>\r\n    </imu>\r\n  </sensor>\r\n</gazebo>\n'})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Verify IMU link is rigidly attached (no floating joints)"}),"\n",(0,r.jsx)(n.li,{children:"Check that the robot is properly initialized in the world"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-physics-performance-issues",children:"4. Physics Performance Issues"}),"\n",(0,r.jsx)(n.h4,{id:"issue-low-fps-under-30",children:"Issue: Low FPS (under 30)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Simulation runs slowly, jerky motion\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Simplify collision geometries:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Use simple shapes instead of complex meshes --\x3e\r\n<collision name="collision">\r\n  <geometry>\r\n    <box size="0.5 0.3 0.15"/>\r\n  </geometry>\r\n</collision>\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Adjust physics parameters:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<physics name="fast_physics" type="ode">\r\n  <max_step_size>0.01</max_step_size>  \x3c!-- Increase for better performance --\x3e\r\n  <real_time_update_rate>100.0</real_time_update_rate>\r\n  <ode>\r\n    <solver>\r\n      <iters>10</iters>  \x3c!-- Reduce iterations --\x3e\r\n    </solver>\r\n  </ode>\r\n</physics>\n'})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Reduce sensor update rates"}),"\n",(0,r.jsx)(n.li,{children:"Use fewer complex models in the scene"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"issue-unstable-physics-simulation",children:"Issue: Unstable physics simulation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Objects behave erratically, explosions in simulation\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Decrease max step size:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<max_step_size>0.001</max_step_size>  \x3c!-- Smaller for more stability --\x3e\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Increase solver iterations:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<iters>50</iters>\n"})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Check for high mass ratios (should be < 1000:1)"}),"\n",(0,r.jsx)(n.li,{children:"Verify proper inertial properties"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"5-communication-issues",children:"5. Communication Issues"}),"\n",(0,r.jsx)(n.h4,{id:"issue-topics-not-connecting-between-gazebo-and-ros",children:"Issue: Topics not connecting between Gazebo and ROS"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": No communication between simulation and ROS nodes\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check topic names match:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List all topics\r\nros2 topic list\r\n# Check specific topic\r\nros2 topic info /cmd_vel\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Verify plugin configuration:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">\r\n  <command_topic>cmd_vel</command_topic>  \x3c!-- Check this matches your controller --\x3e\r\n  <odometry_topic>odom</odometry_topic>\r\n</plugin>\n'})}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Check network configuration if running distributed"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"issue-tf-tree-issues",children:"Issue: TF tree issues"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": TF transforms not available or incorrect\r\n",(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Check joint names match between URDF and controller"}),"\n",(0,r.jsxs)(n.li,{children:["Verify robot_state_publisher is running:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run robot_state_publisher robot_state_publisher\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Check joint_state_publisher if needed:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run joint_state_publisher joint_state_publisher\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"diagnostic-tools",children:"Diagnostic Tools"}),"\n",(0,r.jsx)(n.h3,{id:"1-gazebo-built-in-tools",children:"1. Gazebo Built-in Tools"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check simulation statistics\r\ngz stats\r\n\r\n# View model information\r\ngz model -m your_robot_name\r\n\r\n# Check physics properties\r\ngz physics\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-ros-2-diagnostic-commands",children:"2. ROS 2 Diagnostic Commands"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check topic health\r\nros2 topic list\r\nros2 topic info /your_topic\r\nros2 topic hz /your_topic\r\n\r\n# Check service availability\r\nros2 service list\r\nros2 service info /gazebo/spawn_entity\r\n\r\n# Check TF tree\r\nros2 run tf2_tools view_frames\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-performance-monitoring",children:"3. Performance Monitoring"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Monitor system resources\r\nhtop\r\n# Monitor simulation performance\r\nros2 run your_package fps_validator\n"})}),"\n",(0,r.jsx)(n.h2,{id:"debugging-strategies",children:"Debugging Strategies"}),"\n",(0,r.jsx)(n.h3,{id:"1-isolation-method",children:"1. Isolation Method"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Start with minimal world (empty world)"}),"\n",(0,r.jsx)(n.li,{children:"Add robot model only"}),"\n",(0,r.jsx)(n.li,{children:"Add sensors one by one"}),"\n",(0,r.jsx)(n.li,{children:"Add controllers gradually"}),"\n",(0,r.jsx)(n.li,{children:"This helps identify which component causes issues"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-logging-and-monitoring",children:"2. Logging and Monitoring"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Enable detailed logging in URDF/plugins --\x3e\r\n<plugin name="debug_plugin" filename="libgazebo_ros_diff_drive.so">\r\n  \x3c!-- Add debug parameters --\x3e\r\n  <ros>\r\n    <remapping>cmd_vel:=/debug_cmd_vel</remapping>\r\n  </ros>\r\n</plugin>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-configuration-testing",children:"3. Configuration Testing"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Test with default physics parameters first"}),"\n",(0,r.jsx)(n.li,{children:"Make one change at a time"}),"\n",(0,r.jsx)(n.li,{children:"Document what works and what doesn't"}),"\n",(0,r.jsx)(n.li,{children:"Keep backups of working configurations"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"common-configuration-issues",children:"Common Configuration Issues"}),"\n",(0,r.jsx)(n.h3,{id:"1-urdfxacro-issues",children:"1. URDF/Xacro Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Missing xmlns"}),": Ensure proper XML namespace declarations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Invalid joint limits"}),": Check min/max values are reasonable"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Inconsistent units"}),": Use consistent units (meters, radians, kg)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Wrong joint types"}),": Verify joint type matches intended motion"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-gazebo-plugin-issues",children:"2. Gazebo Plugin Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Wrong library names"}),": Verify plugin library names are correct"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Missing dependencies"}),": Check all required packages are installed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topic name mismatches"}),": Verify topic names match between nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Frame name inconsistencies"}),": Check frame names match TF tree"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-environment-issues",children:"3. Environment Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Path problems"}),": Ensure GAZEBO_MODEL_PATH is set correctly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"File permissions"}),": Check read/write permissions on model files"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Resource limits"}),": Verify sufficient memory and CPU resources"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prevention-best-practices",children:"Prevention Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-model-design",children:"1. Model Design"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use consistent units throughout"}),"\n",(0,r.jsx)(n.li,{children:"Verify mass and inertia properties"}),"\n",(0,r.jsx)(n.li,{children:"Test with simple geometries first"}),"\n",(0,r.jsx)(n.li,{children:"Include proper visual and collision elements"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-physics-configuration",children:"2. Physics Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Start with conservative parameters"}),"\n",(0,r.jsx)(n.li,{children:"Gradually optimize for performance"}),"\n",(0,r.jsx)(n.li,{children:"Document parameter changes and effects"}),"\n",(0,r.jsx)(n.li,{children:"Test with various scenarios"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-sensor-configuration",children:"3. Sensor Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify sensor placement and orientation"}),"\n",(0,r.jsx)(n.li,{children:"Test individual sensors before integration"}),"\n",(0,r.jsx)(n.li,{children:"Monitor resource usage"}),"\n",(0,r.jsx)(n.li,{children:"Validate sensor data quality"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"advanced-troubleshooting",children:"Advanced Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"1-gazebo-server-debugging",children:"1. Gazebo Server Debugging"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Run with verbose output\r\ngzserver --verbose your_world.world\r\n\r\n# Run with debugging enabled\r\ngdb --args gzserver your_world.world\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-physics-engine-debugging",children:"2. Physics Engine Debugging"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Enable physics debugging --\x3e\r\n<physics name="debug_physics" type="ode">\r\n  <debug>1</debug>  \x3c!-- Enable if supported --\x3e\r\n</physics>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-custom-diagnostic-scripts",children:"3. Custom Diagnostic Scripts"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nCustom diagnostic script for simulation issues\r\n\"\"\"\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import JointState\r\nfrom std_msgs.msg import String\r\nimport time\r\n\r\nclass SimulationDiagnostics(Node):\r\n    def __init__(self):\r\n        super().__init__('simulation_diagnostics')\r\n\r\n        self.joint_subscription = self.create_subscription(\r\n            JointState, '/joint_states', self.joint_callback, 10)\r\n\r\n        self.status_publisher = self.create_publisher(\r\n            String, '/simulation_status', 10)\r\n\r\n        self.last_joint_update = time.time()\r\n        self.get_logger().info('Simulation diagnostics started')\r\n\r\n    def joint_callback(self, msg):\r\n        current_time = time.time()\r\n        time_diff = current_time - self.last_joint_update\r\n\r\n        if time_diff > 1.0:  # No joint updates for 1 second\r\n            status_msg = String()\r\n            status_msg.data = f'JOINT_UPDATE_ISSUE: Last update {time_diff:.2f}s ago'\r\n            self.status_publisher.publish(status_msg)\r\n\r\n        self.last_joint_update = current_time\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    diagnostics = SimulationDiagnostics()\r\n\r\n    try:\r\n        rclpy.spin(diagnostics)\r\n    except KeyboardInterrupt:\r\n        diagnostics.get_logger().info('Diagnostics stopped by user')\r\n\r\n    diagnostics.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"quick-reference-checklist",children:"Quick Reference Checklist"}),"\n",(0,r.jsx)(n.h3,{id:"before-launching-simulation",children:"Before Launching Simulation"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verify all model files exist and are readable"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Check URDF syntax with ",(0,r.jsx)(n.code,{children:"check_urdf your_robot.urdf"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Confirm Gazebo plugins are properly configured"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Ensure required ROS packages are installed"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"if-simulation-runs-slowly",children:"If Simulation Runs Slowly"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Reduce physics update rate"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Simplify collision meshes"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Lower sensor resolutions"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Check system resources (CPU, memory)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"if-robot-behaves-unexpectedly",children:"If Robot Behaves Unexpectedly"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verify mass and inertia values"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Check joint limits and types"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Validate controller parameters"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Examine physics engine settings"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"if-sensors-dont-work",children:"If Sensors Don't Work"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Confirm sensor plugins are loaded"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Check topic names match expectations"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verify sensor placement in URDF"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test with simple sensor configurations"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(n.p,{children:"This troubleshooting guide covers the most common simulation-specific issues you'll encounter when working with Gazebo and ROS 2. Remember to approach problems systematically, starting with simple configurations and gradually adding complexity. Keep detailed notes of working configurations, and don't hesitate to test components in isolation when diagnosing complex issues. Regular validation and monitoring will help maintain a stable and performant simulation environment."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);