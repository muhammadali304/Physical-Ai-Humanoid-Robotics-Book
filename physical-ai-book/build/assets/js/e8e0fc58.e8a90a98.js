"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[7425],{3692:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"simulation/urdf-modeling","title":"URDF Modeling - Robot Description Format","description":"Learning Objectives","source":"@site/docs/simulation/urdf-modeling.md","sourceDirName":"simulation","slug":"/simulation/urdf-modeling","permalink":"/docs/simulation/urdf-modeling","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/simulation/urdf-modeling.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Gazebo Simulation - Basics","permalink":"/docs/simulation/gazebo-basics"},"next":{"title":"Custom World Creation with SDF Format and Obstacles","permalink":"/docs/simulation/custom-world-creation"}}');var s=i(4848),o=i(7074);const l={sidebar_position:3},t="URDF Modeling - Robot Description Format",a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Conceptual Overview",id:"conceptual-overview",level:2},{value:"URDF Structure",id:"urdf-structure",level:3},{value:"Why URDF is Important",id:"why-urdf-is-important",level:3},{value:"Hands-On Implementation",id:"hands-on-implementation",level:2},{value:"Basic URDF Structure",id:"basic-urdf-structure",level:3},{value:"Understanding Link Elements",id:"understanding-link-elements",level:3},{value:"Visual Element",id:"visual-element",level:4},{value:"Collision Element",id:"collision-element",level:4},{value:"Inertial Element",id:"inertial-element",level:4},{value:"Joint Types and Properties",id:"joint-types-and-properties",level:3},{value:"Example Joint Definitions",id:"example-joint-definitions",level:4},{value:"Creating a More Complex Robot Model",id:"creating-a-more-complex-robot-model",level:3},{value:"Adding Sensors to URDF",id:"adding-sensors-to-urdf",level:3},{value:"Using Xacro for Complex Models",id:"using-xacro-for-complex-models",level:3},{value:"Creating a Complete Robot Package",id:"creating-a-complete-robot-package",level:3},{value:"Testing &amp; Verification",id:"testing--verification",level:2},{value:"Validating URDF Files",id:"validating-urdf-files",level:3},{value:"Useful URDF Commands",id:"useful-urdf-commands",level:3},{value:"Common Validation Steps",id:"common-validation-steps",level:3},{value:"Common Issues",id:"common-issues",level:2},{value:"Issue: URDF fails to load or parse",id:"issue-urdf-fails-to-load-or-parse",level:3},{value:"Issue: Robot appears distorted or with wrong proportions",id:"issue-robot-appears-distorted-or-with-wrong-proportions",level:3},{value:"Issue: Physics simulation is unstable",id:"issue-physics-simulation-is-unstable",level:3},{value:"Issue: Joint limits not working in simulation",id:"issue-joint-limits-not-working-in-simulation",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"urdf-modeling---robot-description-format",children:"URDF Modeling - Robot Description Format"})}),"\n",(0,s.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(e.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Understand the Unified Robot Description Format (URDF) structure and syntax"}),"\n",(0,s.jsx)(e.li,{children:"Create complex robot models with multiple links and joints"}),"\n",(0,s.jsx)(e.li,{children:"Add visual, collision, and inertial properties to robot models"}),"\n",(0,s.jsx)(e.li,{children:"Include sensors and actuators in URDF descriptions"}),"\n",(0,s.jsx)(e.li,{children:"Validate and debug URDF models"}),"\n",(0,s.jsx)(e.li,{children:"Use Xacro macros to simplify complex robot descriptions"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(e.p,{children:"Before starting this chapter, you should:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Understand ROS 2 nodes, topics, and packages"}),"\n",(0,s.jsx)(e.li,{children:"Have basic knowledge of 3D geometry and coordinate systems"}),"\n",(0,s.jsx)(e.li,{children:"Completed the simulation chapters (Gazebo and Unity)"}),"\n",(0,s.jsx)(e.li,{children:"Basic familiarity with XML syntax"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"conceptual-overview",children:"Conceptual Overview"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"URDF (Unified Robot Description Format)"})," is an XML-based format used to describe robots in ROS. It defines the physical and visual properties of a robot including:"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Links"}),": Rigid parts of the robot (e.g., chassis, wheels, arms)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Joints"}),": Connections between links (e.g., revolute, prismatic, fixed)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Visual properties"}),": How the robot appears in simulation"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Collision properties"}),": How the robot interacts physically"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Inertial properties"}),": Mass, center of mass, and inertia for physics simulation"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Sensors and actuators"}),": For simulation and control"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"urdf-structure",children:"URDF Structure"}),"\n",(0,s.jsx)(e.p,{children:"A URDF file typically contains:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Robot name and basic properties"}),"\n",(0,s.jsx)(e.li,{children:"Link definitions (visual, collision, inertial)"}),"\n",(0,s.jsx)(e.li,{children:"Joint definitions (parent-child relationships)"}),"\n",(0,s.jsx)(e.li,{children:"Material definitions"}),"\n",(0,s.jsx)(e.li,{children:"Transmission elements (for control)"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"why-urdf-is-important",children:"Why URDF is Important"}),"\n",(0,s.jsx)(e.p,{children:"URDF is crucial for:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Simulation"}),": Accurate physics and visualization in Gazebo/Unity"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Robot State Publishing"}),": TF transforms for coordinate frames"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Motion Planning"}),": MoveIt! uses URDF for kinematic models"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Control"}),": Joint limits and dynamics for controllers"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Visualization"}),": RViz displays robot models in proper poses"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"hands-on-implementation",children:"Hands-On Implementation"}),"\n",(0,s.jsx)(e.h3,{id:"basic-urdf-structure",children:"Basic URDF Structure"}),"\n",(0,s.jsx)(e.p,{children:"Let's start with a simple URDF example that includes the essential elements:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"simple_robot.urdf:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="simple_robot">\n  \x3c!-- Base link - the main body of the robot --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <box size="0.5 0.3 0.15"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 1 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <box size="0.5 0.3 0.15"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="1.0"/>\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\n    </inertial>\n  </link>\n\n  \x3c!-- A simple wheel --\x3e\n  <link name="wheel">\n    <visual>\n      <geometry>\n        <cylinder radius="0.1" length="0.05"/>\n      </geometry>\n      <material name="black">\n        <color rgba="0 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder radius="0.1" length="0.05"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="0.2"/>\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Joint connecting wheel to base --\x3e\n  <joint name="wheel_joint" type="continuous">\n    <parent link="base_link"/>\n    <child link="wheel"/>\n    <origin xyz="0 0.2 -0.05" rpy="1.5707 0 0"/>\n    <axis xyz="0 0 1"/>\n  </joint>\n</robot>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"understanding-link-elements",children:"Understanding Link Elements"}),"\n",(0,s.jsx)(e.h4,{id:"visual-element",children:"Visual Element"}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"<visual>"})," element defines how the link appears in visualization:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<visual>\n  <origin xyz="0 0 0" rpy="0 0 0"/>\n  <geometry>\n    <box size="1 1 1"/>\n    \x3c!-- Other options: <sphere radius="1"/>, <cylinder radius="1" length="1"/> --\x3e\n  </geometry>\n  <material name="red">\n    <color rgba="1 0 0 1"/>\n  </material>\n</visual>\n'})}),"\n",(0,s.jsx)(e.h4,{id:"collision-element",children:"Collision Element"}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"<collision>"})," element defines the physical boundaries for collision detection:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<collision>\n  <origin xyz="0 0 0" rpy="0 0 0"/>\n  <geometry>\n    <box size="1 1 1"/>\n  </geometry>\n</collision>\n'})}),"\n",(0,s.jsx)(e.h4,{id:"inertial-element",children:"Inertial Element"}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"<inertial>"})," element defines physical properties for simulation:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<inertial>\n  <mass value="1.0"/>\n  <origin xyz="0 0 0" rpy="0 0 0"/>\n  <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\n</inertial>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"joint-types-and-properties",children:"Joint Types and Properties"}),"\n",(0,s.jsx)(e.p,{children:"URDF supports several joint types:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Fixed"}),": No movement (0 DOF)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Revolute"}),": Rotational joint with limits (1 DOF)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Continuous"}),": Rotational joint without limits (1 DOF)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Prismatic"}),": Linear sliding joint (1 DOF)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Planar"}),": Movement in a plane (2 DOF)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Floating"}),": Free movement in 3D space (6 DOF)"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"example-joint-definitions",children:"Example Joint Definitions"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'\x3c!-- Fixed joint (no movement) --\x3e\n<joint name="fixed_joint" type="fixed">\n  <parent link="base_link"/>\n  <child link="sensor_mount"/>\n  <origin xyz="0.1 0 0.1" rpy="0 0 0"/>\n</joint>\n\n\x3c!-- Revolute joint (rotational with limits) --\x3e\n<joint name="arm_joint" type="revolute">\n  <parent link="base_link"/>\n  <child link="arm_link"/>\n  <origin xyz="0 0 0.1" rpy="0 0 0"/>\n  <axis xyz="0 0 1"/>\n  <limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>\n</joint>\n\n\x3c!-- Continuous joint (rotational without limits) --\x3e\n<joint name="wheel_joint" type="continuous">\n  <parent link="base_link"/>\n  <child link="wheel"/>\n  <origin xyz="0 0.2 -0.05" rpy="1.5707 0 0"/>\n  <axis xyz="0 0 1"/>\n</joint>\n\n\x3c!-- Prismatic joint (linear sliding) --\x3e\n<joint name="slider_joint" type="prismatic">\n  <parent link="base_link"/>\n  <child link="slider"/>\n  <origin xyz="0.1 0 0" rpy="0 0 0"/>\n  <axis xyz="1 0 0"/>\n  <limit lower="0" upper="0.5" effort="100.0" velocity="0.5"/>\n</joint>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"creating-a-more-complex-robot-model",children:"Creating a More Complex Robot Model"}),"\n",(0,s.jsx)(e.p,{children:"Let's create a differential drive robot with sensors:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"diff_robot.urdf:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="diff_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">\n  \x3c!-- Constants --\x3e\n  <xacro:property name="M_PI" value="3.1415926535897931" />\n\n  \x3c!-- Robot base --\x3e\n  <link name="base_link">\n    <visual>\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\n      <geometry>\n        <box size="0.4 0.3 0.1"/>\n      </geometry>\n      <material name="light_grey">\n        <color rgba="0.7 0.7 0.7 1.0"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\n      <geometry>\n        <box size="0.4 0.3 0.1"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="5.0"/>\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.3"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Left wheel --\x3e\n  <link name="left_wheel">\n    <visual>\n      <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\n      <geometry>\n        <cylinder radius="0.05" length="0.04"/>\n      </geometry>\n      <material name="black">\n        <color rgba="0 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\n      <geometry>\n        <cylinder radius="0.05" length="0.04"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="0.5"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Right wheel --\x3e\n  <link name="right_wheel">\n    <visual>\n      <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\n      <geometry>\n        <cylinder radius="0.05" length="0.04"/>\n      </geometry>\n      <material name="black">\n        <color rgba="0 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\n      <geometry>\n        <cylinder radius="0.05" length="0.04"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="0.5"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Left wheel joint --\x3e\n  <joint name="left_wheel_joint" type="continuous">\n    <parent link="base_link"/>\n    <child link="left_wheel"/>\n    <origin xyz="0 0.15 -0.05" rpy="0 0 0"/>\n    <axis xyz="0 0 1"/>\n  </joint>\n\n  \x3c!-- Right wheel joint --\x3e\n  <joint name="right_wheel_joint" type="continuous">\n    <parent link="base_link"/>\n    <child link="right_wheel"/>\n    <origin xyz="0 -0.15 -0.05" rpy="0 0 0"/>\n    <axis xyz="0 0 1"/>\n  </joint>\n\n  \x3c!-- Camera link --\x3e\n  <link name="camera_link">\n    <visual>\n      <geometry>\n        <box size="0.05 0.05 0.03"/>\n      </geometry>\n      <material name="red">\n        <color rgba="1 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <box size="0.05 0.05 0.03"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="0.1"/>\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Camera joint --\x3e\n  <joint name="camera_joint" type="fixed">\n    <parent link="base_link"/>\n    <child link="camera_link"/>\n    <origin xyz="0.15 0 0.1" rpy="0 0 0"/>\n  </joint>\n\n  \x3c!-- Hokuyo Laser Scanner --\x3e\n  <link name="laser_link">\n    <visual>\n      <geometry>\n        <box size="0.05 0.05 0.05"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 1 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <box size="0.05 0.05 0.05"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="0.1"/>\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Laser joint --\x3e\n  <joint name="laser_joint" type="fixed">\n    <parent link="base_link"/>\n    <child link="laser_link"/>\n    <origin xyz="0.15 0 0.15" rpy="0 0 0"/>\n  </joint>\n</robot>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"adding-sensors-to-urdf",children:"Adding Sensors to URDF"}),"\n",(0,s.jsx)(e.p,{children:"To include sensors in your URDF, you typically add Gazebo plugins:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"diff_robot_with_sensors.urdf (with Gazebo plugins):"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="diff_robot_with_sensors" xmlns:xacro="http://www.ros.org/wiki/xacro">\n  \x3c!-- Include the previous robot definition --\x3e\n  \x3c!-- ... (previous robot definition here) ... --\x3e\n\n  \x3c!-- Gazebo plugin for differential drive --\x3e\n  <gazebo>\n    <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">\n      <ros>\n        <namespace>diff_robot</namespace>\n        <remapping>cmd_vel:=cmd_vel</remapping>\n        <remapping>odom:=odom</remapping>\n      </ros>\n      <update_rate>30</update_rate>\n      <left_joint>left_wheel_joint</left_joint>\n      <right_joint>right_wheel_joint</right_joint>\n      <wheel_separation>0.3</wheel_separation>\n      <wheel_diameter>0.1</wheel_diameter>\n      <max_wheel_torque>20</max_wheel_torque>\n      <max_wheel_acceleration>1.0</max_wheel_acceleration>\n      <publish_odom>true</publish_odom>\n      <publish_odom_tf>true</publish_odom_tf>\n      <publish_wheel_tf>true</publish_wheel_tf>\n      <odometry_frame>odom</odometry_frame>\n      <robot_base_frame>base_link</robot_base_frame>\n    </plugin>\n  </gazebo>\n\n  \x3c!-- Gazebo plugin for camera --\x3e\n  <gazebo reference="camera_link">\n    <sensor name="camera" type="camera">\n      <update_rate>30</update_rate>\n      <camera name="head">\n        <horizontal_fov>1.3962634</horizontal_fov>\n        <image>\n          <width>800</width>\n          <height>600</height>\n          <format>R8G8B8</format>\n        </image>\n        <clip>\n          <near>0.02</near>\n          <far>300</far>\n        </clip>\n      </camera>\n      <plugin name="camera_controller" filename="libgazebo_ros_camera.so">\n        <ros>\n          <namespace>diff_robot</namespace>\n          <remapping>image_raw:=camera/image_raw</remapping>\n          <remapping>camera_info:=camera/camera_info</remapping>\n        </ros>\n        <camera_name>camera</camera_name>\n        <frame_name>camera_link</frame_name>\n        <hack_baseline>0.07</hack_baseline>\n        <distortion_k1>0.0</distortion_k1>\n        <distortion_k2>0.0</distortion_k2>\n        <distortion_k3>0.0</distortion_k3>\n        <distortion_t1>0.0</distortion_t1>\n        <distortion_t2>0.0</distortion_t2>\n      </plugin>\n    </sensor>\n  </gazebo>\n\n  \x3c!-- Gazebo plugin for laser scanner --\x3e\n  <gazebo reference="laser_link">\n    <sensor name="laser" type="ray">\n      <pose>0 0 0 0 0 0</pose>\n      <visualize>true</visualize>\n      <update_rate>40</update_rate>\n      <ray>\n        <scan>\n          <horizontal>\n            <samples>720</samples>\n            <resolution>1</resolution>\n            <min_angle>-1.570796</min_angle>\n            <max_angle>1.570796</max_angle>\n          </horizontal>\n        </scan>\n        <range>\n          <min>0.10</min>\n          <max>30.0</max>\n          <resolution>0.01</resolution>\n        </range>\n      </ray>\n      <plugin name="laser_controller" filename="libgazebo_ros_ray_sensor.so">\n        <ros>\n          <namespace>diff_robot</namespace>\n          <remapping>scan:=scan</remapping>\n        </ros>\n        <output_type>sensor_msgs/LaserScan</output_type>\n        <frame_name>laser_link</frame_name>\n      </plugin>\n    </sensor>\n  </gazebo>\n</robot>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"using-xacro-for-complex-models",children:"Using Xacro for Complex Models"}),"\n",(0,s.jsx)(e.p,{children:"Xacro is a macro language for URDF that allows for:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Parameterization"}),"\n",(0,s.jsx)(e.li,{children:"Reusable components"}),"\n",(0,s.jsx)(e.li,{children:"Cleaner code"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Create a wheel macro (wheel.xacro):"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro">\n  <xacro:macro name="wheel" params="prefix parent *origin radius length mass">\n    <link name="${prefix}_wheel">\n      <visual>\n        <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\n        <geometry>\n          <cylinder radius="${radius}" length="${length}"/>\n        </geometry>\n        <material name="black">\n          <color rgba="0 0 0 1"/>\n        </material>\n      </visual>\n      <collision>\n        <origin xyz="0 0 0" rpy="${M_PI/2} 0 0"/>\n        <geometry>\n          <cylinder radius="${radius}" length="${length}"/>\n        </geometry>\n      </collision>\n      <inertial>\n        <mass value="${mass}"/>\n        <origin xyz="0 0 0"/>\n        <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>\n      </inertial>\n    </link>\n\n    <joint name="${prefix}_wheel_joint" type="continuous">\n      <parent link="${parent}"/>\n      <child link="${prefix}_wheel"/>\n      <xacro:insert_block name="origin"/>\n      <axis xyz="0 0 1"/>\n    </joint>\n  </xacro:macro>\n</robot>\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Use the macro in your main URDF:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="diff_robot_xacro" xmlns:xacro="http://www.ros.org/wiki/xacro">\n  \x3c!-- Include the wheel macro --\x3e\n  <xacro:include filename="wheel.xacro"/>\n\n  \x3c!-- Constants --\x3e\n  <xacro:property name="M_PI" value="3.1415926535897931" />\n\n  \x3c!-- Robot base --\x3e\n  <link name="base_link">\n    <visual>\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\n      <geometry>\n        <box size="0.4 0.3 0.1"/>\n      </geometry>\n      <material name="light_grey">\n        <color rgba="0.7 0.7 0.7 1.0"/>\n      </material>\n    </visual>\n    <collision>\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\n      <geometry>\n        <box size="0.4 0.3 0.1"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="5.0"/>\n      <origin xyz="0 0 0.1" rpy="0 0 0"/>\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.3"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Use the wheel macro for left wheel --\x3e\n  <xacro:wheel prefix="left" parent="base_link" radius="0.05" length="0.04" mass="0.5">\n    <origin xyz="0 0.15 -0.05" rpy="0 0 0"/>\n  </xacro:wheel>\n\n  \x3c!-- Use the wheel macro for right wheel --\x3e\n  <xacro:wheel prefix="right" parent="base_link" radius="0.05" length="0.04" mass="0.5">\n    <origin xyz="0 -0.15 -0.05" rpy="0 0 0"/>\n  </xacro:wheel>\n</robot>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"creating-a-complete-robot-package",children:"Creating a Complete Robot Package"}),"\n",(0,s.jsx)(e.p,{children:"Let's create a proper ROS 2 package for our robot model:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Create the package:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_cmake robot_description\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Create the URDF directory structure:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src/robot_description/urdf\nmkdir -p ~/ros2_ws/src/robot_description/meshes\nmkdir -p ~/ros2_ws/src/robot_description/config\nmkdir -p ~/ros2_ws/src/robot_description/launch\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Add your URDF files to the urdf directory"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Update package.xml:"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>robot_description</name>\n  <version>0.0.1</version>\n  <description>URDF description for a differential drive robot</description>\n  <maintainer email="user@todo.todo">user</maintainer>\n  <license>Apache-2.0</license>\n\n  <exec_depend>xacro</exec_depend>\n  <exec_depend>joint_state_publisher</exec_depend>\n  <exec_depend>robot_state_publisher</exec_depend>\n  <exec_depend>rviz2</exec_depend>\n\n  <export>\n    <build_type>ament_cmake</build_type>\n  </export>\n</package>\n'})}),"\n",(0,s.jsxs)(e.ol,{start:"5",children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Create a launch file to visualize the robot:"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"robot_description/launch/robot_display.launch.py:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\n\n\ndef generate_launch_description():\n    # Declare arguments\n    declared_arguments = []\n    declared_arguments.append(\n        DeclareLaunchArgument(\n            'use_sim_time',\n            default_value='false',\n            description='Use simulation time if true.'\n        )\n    )\n\n    # Launch configurations\n    use_sim_time = LaunchConfiguration('use_sim_time')\n\n    # Get URDF via xacro\n    robot_description_content = PathJoinSubstitution([\n        FindPackageShare('robot_description'),\n        'urdf',\n        'diff_robot.urdf.xacro'  # assuming your file is named this way\n    ])\n\n    robot_state_publisher_node = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        parameters=[\n            {'use_sim_time': use_sim_time},\n            {'robot_description': robot_description_content}\n        ]\n    )\n\n    # Joint state publisher for visualization\n    joint_state_publisher_node = Node(\n        package='joint_state_publisher',\n        executable='joint_state_publisher',\n        parameters=[{'use_sim_time': use_sim_time}]\n    )\n\n    # RViz2 for visualization\n    rviz_config_file = PathJoinSubstitution([\n        FindPackageShare('robot_description'),\n        'config',\n        'robot_display.rviz'\n    ])\n\n    rviz_node = Node(\n        package='rviz2',\n        executable='rviz2',\n        name='rviz2',\n        arguments=['-d', rviz_config_file],\n        parameters=[{'use_sim_time': use_sim_time}],\n        output='screen'\n    )\n\n    nodes = [\n        robot_state_publisher_node,\n        joint_state_publisher_node,\n        rviz_node\n    ]\n\n    return LaunchDescription(declared_arguments + nodes)\n"})}),"\n",(0,s.jsx)(e.h2,{id:"testing--verification",children:"Testing & Verification"}),"\n",(0,s.jsx)(e.h3,{id:"validating-urdf-files",children:"Validating URDF Files"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Check URDF syntax:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Check if URDF is well-formed\ncheck_urdf $(ros2 pkg prefix robot_description)/share/robot_description/urdf/diff_robot.urdf\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"2",children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Visualize the robot:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Source your workspace\ncd ~/ros2_ws\nsource install/setup.bash\n\n# Launch the display\nros2 launch robot_description robot_display.launch.py\n"})}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Use the URDF spawner tool:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Install if not already installed\nsudo apt install ros-humble-urdf-tutorial\n\n# Parse and check the URDF\nros2 run urdf_parser_py display_urdf /path/to/your/robot.urdf\n"})}),"\n",(0,s.jsx)(e.h3,{id:"useful-urdf-commands",children:"Useful URDF Commands"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"List robot joints:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ros2 param list | grep joint\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Check TF tree:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ros2 run tf2_tools view_frames\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Echo joint states:"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ros2 topic echo /joint_states\n"})}),"\n",(0,s.jsx)(e.h3,{id:"common-validation-steps",children:"Common Validation Steps"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Check for proper XML syntax"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Verify all joint parent/child relationships"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Ensure all referenced files exist (meshes, etc.)"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Validate mass and inertia values"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"Check for proper coordinate frame definitions"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,s.jsx)(e.h3,{id:"issue-urdf-fails-to-load-or-parse",children:"Issue: URDF fails to load or parse"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Check for proper XML syntax (all tags closed properly)"}),"\n",(0,s.jsx)(e.li,{children:"Verify all referenced files exist"}),"\n",(0,s.jsx)(e.li,{children:"Ensure proper file permissions"}),"\n",(0,s.jsxs)(e.li,{children:["Use ",(0,s.jsx)(e.code,{children:"check_urdf"})," to identify specific issues"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"issue-robot-appears-distorted-or-with-wrong-proportions",children:"Issue: Robot appears distorted or with wrong proportions"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Verify units are consistent (usually meters for length)"}),"\n",(0,s.jsx)(e.li,{children:"Check that geometry dimensions are correct"}),"\n",(0,s.jsx)(e.li,{children:"Ensure origins and rotations are properly defined"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"issue-physics-simulation-is-unstable",children:"Issue: Physics simulation is unstable"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Verify inertial properties are physically realistic"}),"\n",(0,s.jsx)(e.li,{children:"Check mass values are appropriate"}),"\n",(0,s.jsx)(e.li,{children:"Ensure center of mass is correctly positioned"}),"\n",(0,s.jsx)(e.li,{children:"Use proper moment of inertia values"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"issue-joint-limits-not-working-in-simulation",children:"Issue: Joint limits not working in simulation"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Verify joint type matches intended movement"}),"\n",(0,s.jsx)(e.li,{children:"Check that limits are properly defined in URDF"}),"\n",(0,s.jsx)(e.li,{children:"Ensure Gazebo plugins are configured correctly"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"URDF is the standard format for robot descriptions in ROS"}),"\n",(0,s.jsx)(e.li,{children:"Proper URDF structure includes links, joints, and physical properties"}),"\n",(0,s.jsx)(e.li,{children:"Xacro simplifies complex robot models with macros and parameters"}),"\n",(0,s.jsx)(e.li,{children:"Gazebo plugins integrate sensors and actuators with simulation"}),"\n",(0,s.jsx)(e.li,{children:"Validation tools help identify and fix URDF issues"}),"\n",(0,s.jsx)(e.li,{children:"Well-structured URDF is essential for simulation, visualization, and control"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(e.p,{children:"In the next chapter, you'll learn about the NVIDIA Isaac platform, which provides advanced tools for robotics perception, navigation, and AI integration."})]})}function h(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},7074:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>t});var r=i(6540);const s={},o=r.createContext(s);function l(n){const e=r.useContext(o);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),r.createElement(o.Provider,{value:e},n.children)}}}]);